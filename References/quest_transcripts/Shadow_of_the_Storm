Shadow of the Storm Dialogue

Video sources referenced.
https://www.youtube.com/watch?v=kXcdMqERqog
https://www.youtube.com/watch?v=yEcesjzb94w
https://www.youtube.com/watch?v=invfzdq86p8
https://www.youtube.com/watch?v=nsKXUjFvZnA

Wiki will be reviewed to fill in gaps from videos
https://runescape.wiki/w/Transcript:Shadow_of_the_Storm

//I can start this quest by speaking to Fr. Reen in Al Kharid
//I must have completed:
//Demon Slayer
//The Golem
//and have:
//Level 30 crafting

class FatherReenDialogue : DialogueBuilderFile() {
    override fun create(b: DialogueBuilder) {
        b.onQuestStage(SHADOW_OF_THE_STORM, 0)
            .npcl("Excuse me, I'm looking for ${player.name}. I have an urgent job for @pronoun.")
            .options()
        opt1
            .option("That's me!")
            .playerl("That's me!")
            .npcl("Thank Saradomin I found you!")
            .npcl("I believe you still have the magical sword Silverlight?")
            .playerl("The sword I used to defeat the demon Delright? Yes, I still have it.")
            .npcl("There is an urgent task that you can do - and only with Silverlight!")
            .npcl("My partner Badden and I have been observing the dark wizard Denath, who we believe has been preparing to summon the powerful demon Agrith-Naar.")
            .npcl("A week ago he took a group of apprentice dark qizards and moved to Uzer, the lost city in the desert. We think he's going to use the city's ancient temple to summon the demon!")
            .playerl("So you want me to stop him?")
            .npcl("Stop him? No! We want you to wait until Agrith-Naar is summoned and then kill him once and for all!")
            .npcl("Let me explain. Agrith-Naar is not an ordinary demon. He has immense magical powers, and he can use these powers to influence the mortal plane.")
            .npcl("This summoning is our chance to rid the world of his evil influence!")
            .npcl("You should go to Uzer and find Badden at once. I'll follow once I've finished some business here.")
            .end()
        opt1
            .option("I'll let you know if I see @pronoun.")
            .playerl("I'll let you know if I see @pronoun.")
            .end()
    //Talking to Father Reen after accepting quest
        b.onQuestStage(SHADOW_OF_THE_STORM, 1)
            .npcl("Did you go to Uzer to see Badden?")
            .playerl("Not yet.")
            .npcl("You must hurry!")
            .end()
	//Father Reen moves to the Golem quest start either after you meet Denath or after you learn about Josef from Matthew.
		b.onQuestStage(SHADOW_OF_THE_STORM, 5)
			.npcl("Phew! It's too hot for me out here. But at least I found my way through the desert!")
            .options()
        opt1
            .option("Why didn't you take the magic carpet?")
            .playerl("Why didn't you take the magic carpet?")
			.npcl("Oh dear no, you won't get me up in one of those things! What if the magic failed?")
            .end()
		opt1
            .option("Why don't you change out of your heavy robes?")
            .playerl("Why don't you change out of your heavy robes?")
			.npcl("But the rules of my order say I must wear them!")
			.playerl("Perhaps the rules were made in a colder place than this?")
			.npcl("Saradomin's rules are once and for all! It is not our place to question them!")
            .end()
		opt1
            .option("Don't worry, soon I'll have killed the demon and we can all go home!")
            .playerl("Don't worry, soon I'll have killed the demon and we can all go home!")
			.npcl("Summoning a demon! Those wizards make me sick! What kind of sad people would call on a supernatural being to solve their problems for them?")
			.playerl("Um, isn't that like what you do when you pray?")
			.npcl("What? No, that's totally different, because... um... because we always give thanks to Saradomin, even when he doesn't do anything!")
			.npcl("Not like those wizards! They're so full of themselves, with their fancy robes and their rituals!")
			.playerl("Um, isn't that like...")
			.npcl("No, it's totally different! Anyway, there must be something wrong with the way they live in their little group and separate themselves from the rest of society. It can't be healthy.")
			.playerl("And that's *nothing* like you being a monk, of course.")
			.npcl("No, nothing like that. Wait, are you being sarcastic? Because you should know that sarcasm is specifically forbidden in the holy book of Saradomin!")
			.playerl("Are you sure Saradomin was being serious about that bit?")
			.npcl("Shut up!")
            .end()
	//Talking to Father Reen during the sandstorm.		
		b.onQuestStage(SHADOW_OF_THE_STORM, 12)
			.npcl("What's happening? This sandstorm came out of nowhere!")
			.playerl("Denath was Agrith Naar all along! Now he's back in his own dimension!")
			.npcl("Oh no! What can we do?")
			.playerl("You've got to help me perform the ritual again so I can kill him!")
			.npcl("Oh! Oh dear! I don't think I could take part in a demonic ritual!")
			.options()
	//Returns to menu excluding this option	
		opt1
            .option("But isn't that what you and Badden asked me to do?")
            .playerl("But isn't that what you and Badden asked me to do?")
			.npcl("But things are different for me! I'm a monk! What if my order found out?")
			.goto()
	//Returns to menu excluding this option		
		opt1
            .option("But the wizards will all die!")
            .playerl("But the wizards will all die!")
			.npcl("They should have known better than to join Denath in his evil schemes!")
			.goto()
	//Father Reen takes a sigil	and walks inside.
		opt1
            .option("Oh, don't be so simple-minded!")
            .playerl("Oh, don't be so simple-minded!")
			.npcl("Well... all right.")
			.playerl("Now take this demonic sigil, and hurry inside!")
			.end()
	//Consider if you didn't have a sigil in your inventory.	
	//Talking to Father Reen after getting golem, reen and badden into the portal room.	
		b.onQuestStage(SHADOW_OF_THE_STORM, 12)
			.npcl("So Agrith Naar was trapped in our dimension all along, and didn't have any influence until the wizards un-summoned him?")
			.npcl("I thought slaying him would make the world better, but now we're fighting to return it to how it was before!")
			.playerl("Perhaps we can't blame demons for everything that's wrong with the world. Sometimes it's just not that simple.")
			.end()
	//Talking to Reen after everyone is ready for the second ritual.
		b.onQuestStage(SHADOW_OF_THE_STORM, 13)
			.npcl("We'd better get on with the ritual. Let's get this other with!")
			.end()				
    }
}

//Talking to Father Badden near The Golem quest start

class FatherBaddenDialogue : DialogueBuilderFile() {
    override fun create(b: DialogueBuilder) {
        b.onQuestStage(SHADOW_OF_THE_STORM, 1)
            .npcl("What brings you to this godforsaken desert?")
            .options()
		opt1
            .option("Reen sent me.")
            .playerl("Reen sent me.")
            .npcl("Saradomin be praised! And you have Silverlight! You're willing to help us, then?")
			.options()
	//opt2 menu returns to the opt2 menu excluding already read options
		opt2
			.option("Tell me more about Agrith-Naar.")
			.playerl("Tell me more about Agrith-Naar.")
			.npcl("Agrith-Naar is not so much a demon as a force of nature. While he is in his own dimension his evil magics can reach everywhere in the world.")
			.npcl("No one knows how far his power extends, but Reen and I believe that much of the suffering in the world is due to him.")
			.npcl("The accident that cripples a man, the storm that sweeps a ship under the sea, the sudden fire in the blood that makes a wolf pack attack a town - all that is Agrith Naar!")
			.goto()
	//this option about Denath is replaced with "Why has he come to Uzer?" after reading it.
		opt2
			.option("Tell me more about Denath.")
			.playerl("Tell me more about Denath.")
			.npcl("We've been keeping an eye on Denath for some years now, but we've never been able to move against him.")
			.npcl("He was part of the group that summoned Delrith, but he left Varrock before you arrived and defeated the demon.")
			.npcl("He's been studying Agrith-Naar for years, but when he brought his group here we knew he was about to make his move.")
			.goto()
	//This option below is replaced with "Foul construct? Do you mean the golem?"
		opt2
			.option("Why has he come to Uzer?")
			.playerl("Why has he come to Uzer?")
			.npcl("I'm not sure. This city is very ancient, and its builders were powerful workers of evil magic.")
			.npcl("As that foul construct over there proves. Perhaps there's something here he needs. Do you know what happened here?")
			.goto()
	//This option below returns to original opt2 menu excluding second choice.
		opt2
			.option("Foul construct? Do you mean the golem?")
			.playerl("Foul construct? Do you mean the golem?")
			.npcl("The golem, yes! An abomination in the eyes of holy Saradomin! A mockery of life!")
			.npcl("Right now Denath is more important, but once he is dealt with I should find some way to destroy it.")
			.playerl("But the golem was created to fight a demon! You're on the same side!")
			.playerl("Thousands of years ago a demon attacked this city, but the golem army drove it off.")
			.playerl("When I last came here I opened the portal, and the demon was already dead - it had died of the wounds the golems inflicted.")
			.goto()
		opt2
			.option("So what do you want me to do?")
			.playerl("So what do you want me to do?")
			.npcl("You have to be in position to kill Agrith-Naar as soon as he is summoned. The best way to do that is to infiltrate the group that is summoning him!")
            .options()
		opt3
			.option("How can I do that?")
			.playerl("How can I do that?")
			.npcl("I don't know. You'll have to find some way to convince them you're one of them.")
			.end()
	//returns to opt3 menu
		opt3
			.option("I'd never take part in a demonic ritual!")
			.playerl("I'd never take part in a demonic ritual!")
			.npcl("Oh, don't be so simple-minded! You'll be summoning a demon in order to kill it, to rid the world of great evil! You won't really be joining the group, just infiltrating it.")
			.goto()
        opt1
            .option("Just passing through")
            .playerl("Just passing through")
			.npcl("Oh dear. I was hoping ${player.name} would arrive.")
            .end()
	//after talking to Badden and progressing quest through his dialogue; most of it is the same
		b.onQuestStage(SHADOW_OF_THE_STORM, 2)
			.npcl("How is it going?")
			.options()
	//opt1 menu returns to the opt1 menu excluding already read options
		opt1
			.option("Tell me more about Agrith-Naar.")
			.playerl("Tell me more about Agrith-Naar.")
			.npcl("Agrith-Naar is not so much a demon as a force of nature. While he is in his own dimension his evil magics can reach everywhere in the world.")
			.npcl("No one knows how far his power extends, but Reen and I believe that much of the suffering in the world is due to him.")
			.npcl("The accident that cripples a man, the storm that sweeps a ship under the sea, the sudden fire in the blood that makes a wolf pack attack a town - all that is Agrith Naar!")
			.goto()
	//this option about Denath is replaced with "Why has he come to Uzer?" after reading it.
		opt1
			.option("Tell me more about Denath.")
			.playerl("Tell me more about Denath.")
			.npcl("We've been keeping an eye on Denath for some years now, but we've never been able to move against him.")
			.npcl("He was part of the group that summoned Delrith, but he left Varrock before you arrived and defeated the demon.")
			.npcl("He's been studying Agrith-Naar for years, but when he brought his group here we knew he was about to make his move.")
			.goto()
	//This option below is replaced with "Foul construct? Do you mean the golem?"
		opt1
			.option("Why has he come to Uzer?")
			.playerl("Why has he come to Uzer?")
			.npcl("I'm not sure. This city is very ancient, and its builders were powerful workers of evil magic.")
			.npcl("As that foul construct over there proves. Perhaps there's something here he needs. Do you know what happened here?")
			.goto()
	//This option below returns to original opt1 menu excluding second choice.
		opt1
			.option("Foul construct? Do you mean the golem?")
			.playerl("Foul construct? Do you mean the golem?")
			.npcl("The golem, yes! An abomination in the eyes of holy Saradomin! A mockery of life!")
			.npcl("Right now Denath is more important, but once he is dealt with I should find some way to destroy it.")
			.playerl("But the golem was created to fight a demon! You're on the same side!")
			.playerl("Thousands of years ago a demon attacked this city, but the golem army drove it off.")
			.playerl("When I last came here I opened the portal, and the demon was already dead - it had died of the wounds the golems inflicted.")
			.goto()
		opt1
			.option("I haven't managed to infiltrate the group yet.")
			.playerl("I haven't managed to infiltrate the group yet.")
			.npcl("Oh dear. Do try again. You must be in place when they summon the demon!")
			.end()
	//New dialogue from Badden either after you meet Denath or after you learn about Josef from Matthew.
		b.onQuestStage(SHADOW_OF_THE_STORM, 5)	
			.npcl("How is it going?")
			.options()
		opt1
			.option("Did you see anything happen here last night?")
			.playerl("Did you see anything happen here last night?")
			.npcl("I was sleeping last night. I'm only human after all! But I had this odd dream, about fear and panic, and... fire...")
			.end()
	//Returns to original option menu excluding already selected choice.
		opt1
			.option("Tell me more about Agrith-Naar.")
			.playerl("Tell me more about Agrith-Naar.")
			.npcl("Agrith-Naar is not so much a demon as a force of nature. While he is in his own dimension his evil magics can reach everywhere in the world.")
			.npcl("No one knows how far his power extends, but Reen and I believe that much of the suffering in the world is due to him.")
			.npcl("The accident that cripples a man, the storm that sweeps a ship under the sea, the sudden fire in the blood that makes a wolf pack attack a town - all that is Agrith Naar!")
			.goto()
		//this option about Denath is replaced with "Why has he come to Uzer?" after reading it.
		opt1
			.option("Tell me more about Denath.")
			.playerl("Tell me more about Denath.")
			.npcl("We've been keeping an eye on Denath for some years now, but we've never been able to move against him.")
			.npcl("He was part of the group that summoned Delrith, but he left Varrock before you arrived and defeated the demon.")
			.npcl("He's been studying Agrith-Naar for years, but when he brought his group here we knew he was about to make his move.")
			.goto()
	//This option below is replaced with "Foul construct? Do you mean the golem?"
		opt1
			.option("Why has he come to Uzer?")
			.playerl("Why has he come to Uzer?")
			.npcl("I'm not sure. This city is very ancient, and its builders were powerful workers of evil magic.")
			.npcl("As that foul construct over there proves. Perhaps there's something here he needs. Do you know what happened here?")
			.goto()
	//This option below returns to original opt1 menu excluding second choice.
		opt1
			.option("Foul construct? Do you mean the golem?")
			.playerl("Foul construct? Do you mean the golem?")
			.npcl("The golem, yes! An abomination in the eyes of holy Saradomin! A mockery of life!")
			.npcl("Right now Denath is more important, but once he is dealt with I should find some way to destroy it.")
			.playerl("But the golem was created to fight a demon! You're on the same side!")
			.playerl("Thousands of years ago a demon attacked this city, but the golem army drove it off.")
			.playerl("When I last came here I opened the portal, and the demon was already dead - it had died of the wounds the golems inflicted.")
			.goto()
	//Talking to Father Badden during the sandstorm.		
		b.onQuestStage(SHADOW_OF_THE_STORM, 12)
			.npcl("What's happening? The wind suddenly picked up! It's a desert sandstorm!")
			.playerl("Denath was Agrith-Naar all along! We've just sent him back to his own dimension!")
			.npcl("Saradomin protect us! From his own dimension he'll be able to wreak havoc!")
			.playerl("You've got to help me summon him again, so I can slay him with Silverlight!")
			.npcl("All right!")
			.playerl("You'll need to hold this sigil for the ritual.")
			.end()
	//consider if you didn't have a sigil for him. 
	//Talking to Father Badden after getting golem, reen and badden into the portal room.	
		b.onQuestStage(SHADOW_OF_THE_STORM, 12)
			.npcl("Let's get this ritual over with! I don't want to spend any more time with that golem than I have to!")
			.playerl("What's your problem with the golem? It doesn't mind you!")
			.npcl("Bah!")
			.end()
	//During the fight with Agrith-Naar
		b.onQuestStage(SHADOW_OF_THE_STORM, 15)
			.npcl("So that's Agrith Naar's true form! Quickly, slay him with Silverlight!")
			.end()
	//After the quest
		b.onQuestStage(SHADOW_OF_THE_STORM, 100)
			.npcl("I thought golems were servants of evil, but that one helped us to slay a demon. Perhaps golems aren't so bad after all!")
			.end()		
    }
}

//Talking to Golem

class GolemDialogue : DialogueBuilderFile() {
    override fun create(b: DialogueBuilder) {
        b.onQuestStage(SHADOW_OF_THE_STORM, 1)
            .npcl("It is good to see a friendly face here. The priest has said nothing to me but 'Get ye away, foul construct!'")
			.options()
		opt1
			.option("Why does Badden hate you?")
			.playerl("Why does Badden hate you?")
			.npcl("I do not know. I heard him say that Saradomin hates all artificial creatures. It was not always so.")
			.npcl("When I was new, the priests of Saradomin praised the ingenuity of the golem-builders.")
			.npcl("I paraded through the city with my siblings, all painted in bright colours, and they blessed us with holy water as we prepared for battle.")
			.npcl("He should know that I could never hurt him. The first command in a golem's mind is that it cannot allow a human being to come to harm.")
			.end()
		opt1	
			.option("Do you know anything about the dark wizards who arrived here?")
			.playerl("Do you know anything about the dark wizards who arrived here?")
			.npcl("Some of them were curious about me when they arrived, but since then they have ignored me.")
			.npcl("Some of them were curious about me when they arrived, but since then they have ignored me.")
			.npcl("As they passed me I felt a sense of dark foreboding, something I have not felt since the great enemy was nearby.")
			.npcl("I fear they are planning some great evil.")
			.end()
		//This option is avaiable after you talk to matthew and learn that Josef ran away with the book. Authentic typo "the the" at https://youtu.be/kXcdMqERqog?t=615
		b.onQuestStage(SHADOW_OF_THE_STORM, 5)
			.options()
		opt1	
			.option("Did you see anything happen last night?")
			.playerl("Did you see anything happen last night?")
			.npcl("I saw one of the the men in dark robes run out of the temple. He looked very frightened and I feared for his safety.")
			.npcl("He was carrying a large book. He started to head out into the desert, but then turned back and hid the book in one of the broken kilns in which my kind were created long ago.")
			.npcl("Then another man came out of the temple. He said magical words and threw a fireball at the first man, turning him into dust!")
			.npcl("I should have saved him, but I was not fast enough to throw myself in the path of the fireball.")
			.playerl("Which kiln did he hide the book in?")
			.npcl("I cannot remember. The shock of seeing a human being killed wiped the details of the incident from my memory.")
			.end()
	//After getting Eric's sigil from evil dave. During the Sandstorm.
		b.onQuestStage(SHADOW_OF_THE_STORM, 11)
			.npcl("I sensed a great darkness, as of a demon revelling in its moment of triumph.")
			.npcl("And now this sandstorm appears, the likes of which I have not seen in three throusand years. Waht can it mean?")
			.playerl("Denath was Agrith-Naar all along! We've accidentally helped him get back to his own dimension!")
			.npcl("It is terrible for a demon to be victorious. I wish there was something I could do to rectify the situation.")
			.playerl("You could help me summon the demon again so I could kill him!")
			.npcl("I cannot do that. It is forbidden for a golem to enter the portal.")
			.options()
	//This option returns to to the origianl menu excluding itself.
		opt1	
			.option("But I really need you to.")
			.playerl("But I really need you to.")
			.npcl("A golem cannot disobey the commands in its mind!")
			.goto()
	//This option returns to to the origianl menu excluding itself.
		opt1	
			.option("Why is it forbidden?")
			.playerl("Why is it forbidden?")
			.npcl("I do not know. I was not privy to the thoughts of my designers, and now they cannot be asked.")
			.goto()
		opt1	
			.option("I could just reprogram you again.")
			.playerl("I could just reprogram you again.")
			.npcl("That is true. Perhaps if you opened my head and removed the instruction concerning the portal I would be able to help you.")
			.npcl("But there must have been a reason why my builders imposed this restriction. I do not know what would happen to me if I went through the portal.")
			.end()
	//Using the strange implement on the golem reveals why he is forbidden from entering the portal.
	// .line("You open the golem's head and search through the dusty scrolls inside...")
	// .line("You find one that says 'THOU SHALT NOT ENTER THE PORTAL OF THAMMARON', and remove it.")
	// .end()
	//Now talking to the golem again lets you convince him to help you.
		b.onQuestStage(SHADOW_OF_THE_STORM, 12)
			.npcl("I sensed a great darkness, as of a demon revelling in its moment of triumph.")
			.npcl("And now this sandstorm appears, the likes of which I have not seen in three throusand years. Waht can it mean?")
			.playerl("Denath was Agrith-Naar all along! We've accidentally helped him get back to his own dimension!")
			.npcl("It is terrible for a demon to be victorious. I wish there was something I could do to rectify the situation.")
			.playerl("You could help me summon the demon again so I could kill him!")
			.npcl("What are we waiting for? What do I need to do?")
			.playerl("Take this demonic sigil and go through the portal.")
			.end()
	//Clay golem walks to the stairs and disappears. Consider if there would be dialogue if you did not have a sigil in your inventory.
	//Talking to Golem after getting golem, reen and badden into the portal room.	
		b.onQuestStage(SHADOW_OF_THE_STORM, 12)
			.npcl("Strength low...", "This realm...", "sapping strength...")
			.npcl("combat capability impaired...", "This must be..." "reason...", "portal forbidden...")
			.playerl("I just need your help with the ritual. Do you think you can do that?")
			.npcl("Speech functions not impaired.")
			.end()
	//During the fight with Agrith-Naar
		b.onQuestStage(SHADOW_OF_THE_STORM, 15)
			.npcl("Strength low...", "This realm...", "sapping strength...")
			.npcl("combat capability impaired...", "This must be..." "reason...", "portal forbidden...")
			.end()
	//After the quest
		b.onQuestStage(SHADOW_OF_THE_STORM, 100)
			.npcl("Demon is dead...", "regret...", "could not assist...")
			.playerl("Don't worry, Golem, you've done enough demon-slaying!")
			.end()	
	}
}

//Adding black mushroom ink to desert robes displays this over you chatbox. Change text for relevant item name, eg; desert top, desert robe.
//			.line("If you dye the robe black it will no longer provide protection from the desert sun and you will not be able to remove the dye" )
//			.options() 
//		opt1
//			.option("Dye the robe black.")
//			.line("You dye desert robe black"
//		opt1
//			.option("Don't")
//			.end()

//Evil Dave talks to you if you try to enter the portal without permission.

class EvilDaveDialogue : DialogueBuilderFile() {
    override fun create(b: DialogueBuilder) {
        b.onQuestStage(SHADOW_OF_THE_STORM, 2)
            .npcl("Hey! This is our portal! Keep out!")
			.end()
	}
}

//Talking to Evil Dave for the first time, outside of portal. Please look at the "I'm evil" option closely. Lots of variations.

class EvilDaveDialogue : DialogueBuilderFile() {
    override fun create(b: DialogueBuilder) {
        b.onQuestStage(SHADOW_OF_THE_STORM, 2)
            .npcl("What do you want?")
			.options()
		opt1
			.option("I want to go through the portal.")
			.playerl("I want to go through the portal.")
			.npcl("Go away! This is OUR portal now!")
			.end()
		opt1
			.option("I want to join your group.")
			.playerl("I want to join your group.")
			.npcl("Well we do need one more person now, since... um.")
			.npcl("But we're an evil group! to join, you have to be evil!")
			.options()
		//This "I'm Evil" option is where Evil Dave will check if you are wearing enough evil clothes and if silverlight is dyed.
		//This version is if you do not have three black items worn.
		opt2
			.option("I'm evil!")
			.playerl("I'm evil!")
			.npcl("You don't look evil. You certainly don't dress evil!")
			.playerl("I'm evil in disguise?")
			.npcl("There's no need for the disguise here! We're all evil!")
			.end()
		//This version is if you have three black items worn and if silverlight is dyed black.
		opt2
			.option("I'm evil!")
			.playerl("I'm evil!")
			.npcl("Yeah, I can see that. That outfit is totally evil!")
			.npcl("But what's that sword? It's far too shiny to be evil. We won't have any silver glowing swords in here!")
			.end()
		//This version is if you have three black items worn and if silverlight is dyed black. Starts curtscene.
		opt2
			.option("I'm evil!")
			.playerl("I'm evil!")
			.npcl("Yeah, I can see that. That outfit is totally evil!")
			.npcl("And I love that evil black sword!")
			.npcl("Okay, I'll take you through to see Denath.")
			.end()
		opt2
			.option("Never mind, I'm not evil.")
			.playerl("Never mind, I'm not evil.")
			.npcl("Well get out of our evil temple then!")
			.end()
		opt1
			.option("Oh, nothing.")
			.playerl("Oh, nothing.")
			.npcl("Go away then!")
			.end()
		opt1
			.option("Where did you get those robes?")
			.playerl("Where did you get those robes?")
			.npcl("Yeah, evil, aren't they? One of the group made them. He said he found some mushrooms in the ruins that could dye things really black.")
			.end()
		//Talking to evil dave after meeting Denath
		b.onQuestStage(SHADOW_OF_THE_STORM, 4)
            .npcl("Welcome, [brother/sister]! Soon we'll summon the great demon! Aren't we evil?")
			.options()
		opt1
			.option("Yeah!")
			.playerl("Yeah!")
			.npcl("Yeah!")
			.end()
		opt1
			.option("But isn't evil, you know, bad?")
			.playerl("But isn't evil, you know, bad?")
			.npcl("Yeah! We're BAD!")
			.end()
		opt1
			.option("Do you have the demonic sigil mould?")
			.playerl("Do you have the demonic sigil mould?")
			.npcl("No. Last I heard, Matthew had it.")
			.end()
		opt1
			.option("Do you know what happened to Josef?")
			.playerl("Do you know what happened to Josef?")
			.npcl("I didn't see anything. He left last night, and Denath only posted me here this morning.")
			.end()
	//Dave is next to eric's dead body. https://youtu.be/kXcdMqERqog?t=934
		b.onQuestStage(SHADOW_OF_THE_STORM, 11)
            .npcl("Eric's dead! Agrith-Naar killed him! That's EVIL!")
			.npcl("I mean, it's bad! In a BAD way!")
			.options()
	//This option returns you to original menu excluding this option picked.
		opt1
			.option("What happened?")
			.playerl("What happened?")
			.npcl("The ceiling collapsed without warning! When I moved towards the staircase the walls started to shake. I'm scared of what will happen to me if I try to leave!")
			.goto()
	//After Dave gives you Eric's sigil he walks back into the portal.	
		opt1
			.option("You've got to get back to the throne room!")
			.playerl("You've got to get back to the throne room!")
			.npcl("But the portal is closing! We'll be trapped!")
			.playerl("Our only hope is to summon Agrith-Naar again so I can kill him! But I need eight people.")
			.npcl("You can kill him?")
			.npcl("You better take this then. It was Eric's sigil. Everyone in the ritual will need one!")
	//You only get this line if you do not have a spare space.
			.npcl("But you'll need to free some inventory space first!")
			.end()
	//This option returns you to original menu excluding this option picked.	
		opt1
			.option("By using 'evil' as a term of praise...")
			.playerl("By using 'evil' as a term of praise...")	
			.npcl("There's no time for that! Eric's DEAD!")
			.goto()
	//Talking to Evil Dave after getting golem, reen and badden into the portal room.	
		b.onQuestStage(SHADOW_OF_THE_STORM, 12)
			.npcl("That demon killed Eric! When are you going to start the ritual and slay him?")
			.end()
	//Talking to Evil Dave after everyone is ready for the second ritual.
		b.onQuestStage(SHADOW_OF_THE_STORM, 13)
			.npcl("Hurry up with the ritual! That demon killed Eric!")
			.end()	
	//During the fight with Agrith-Naar
		b.onQuestStage(SHADOW_OF_THE_STORM, 15)
			.npcl("Kill him, ${player.name}!")
			.end()
	//After the quest
		b.onQuestStage(SHADOW_OF_THE_STORM, 100)
			.npcl("Thank goodness that's over!")
			.playerl("Goodness?")
			.npcl("I'm not going to try to be evil any more. From now on I'm going to be good!")
			.end()		
	}
}

//Cutscene dialogue, Dave introduces you to Denath, used Denath_2904 because he is not weilding anything.

class EvilDaveDialogue : DialogueBuilderFile() {
    override fun create(b: DialogueBuilder) {
        b.onQuestStage(SHADOW_OF_THE_STORM, 3)
			.line("Evil Dave escorts you into the demonic throne room.")
            .npcl("Master! This person wants to join us!")
			.npcId(NPCs.Denath_2904, "Indeed? Well we are one wizard short since Josef ran away. Can you vouch for @pronoun?")
			.npcl("Yeah! @pronoun's totally evil!")
			.npcId(NPCs.Denath_2904, "Thank you, Dave.")
			//Cutscene ends and you auto talk to Denath.
			.end()
	}
}

//Automatically starts after previous cutscene. Incantation is different for everyone authentiacally on the 4th option.

class DenathDialogue : DialogueBuilderFile() {
    override fun create(b: DialogueBuilder) {
        b.onQuestStage(SHADOW_OF_THE_STORM, 3)
			.npcl("So you wish to join us? You have made a wise choice. When we summon the demon Agrith-Naar, he will grant all our worldly desires.")
            .npcl("An abyssal whip, a dragon chain mail? To conjure these items is trivial for Agrith-Naar.")
			.npcl("But you will not need such weapons or aromour, for Agrith-Naar will grant you the power of life and death over all creatures!")
			.npcl("You shall have every wish gratned, and everyone who has ever wronged you will burn in a hell of your own devising!")
			.options()
		//Returns to orignal menu, minus the option picked.
		opt1
			.option("Isn't this, you know, wrong?")
			.playerl("Isn't this, you know, wrong?")
			.npcl("Right and wrong are for the weak! This is your chance to choose to be on the side of the strong, and have all your desires granted, while the weak are crushed beneath Agrith Naar's demonic feet!")
			.goto()
		//Returns to orignal menu, minus the option picked.
		opt1
			.option("How do you know Agrith-Naar will do all this for us?")
			.playerl("How do you know Agrith-Naar will do all this for us?")
			.npcl("My binding spells will make Agrith Naar my slave! You would be wise not to question my powers again, lest I turn the same spells on you!")
			.goto()
		//Returns to orignal menu, minus the option picked.
		opt1
			.option("Why did Josef run away?")
			.playerl("Why did Josef run away?")
			.npcl("Obviously he was a coward who did not have the strength to abandon his old-fashioned morality. I hope you will not be a similar disappointment.")
			.goto()
		opt1
			.option("What do I have to do?")
			.playerl("What do I have to do?")
			.npcl("When I have finished preparing the magic circle, we will all recite the incantation that will summon Agrith-Naar.")
			.npcl("You must memorize the incantation carefully. It is Caldar Agrith-Naar Nahudu Camerinthum Tarren.")
			.npcl("You will also need to make yourself a demonic sigil to act as a focus of pwer. One of the group has the mould you need to make it.")
			.npcl("Now let me continue with my preparations!")
			.end()
		//Talking to denath after learning the incantation.
		b.onQuestStage(SHADOW_OF_THE_STORM, 4)
			.npcl("Leave me alone! I am preparing for the summoning ritual. You should make yourself a demonic sigil and practice the incantation with the other wizards.")
			.options()
		//Returns to orignal menu, minus the option picked.
		opt1
			.option("Isn't this, you know, wrong?")
			.playerl("Isn't this, you know, wrong?")
			.npcl("Right and wrong are for the weak! This is your chance to choose to be on the side of the strong, and have all your desires granted, while the weak are crushed beneath Agrith Naar's demonic feet!")
			.goto()
		//Returns to orignal menu, minus the option picked.
		opt1
			.option("How do you know Agrith-Naar will do all this for us?")
			.playerl("How do you know Agrith-Naar will do all this for us?")
			.npcl("My binding spells will make Agrith Naar my slave! You would be wise not to question my powers again, lest I turn the same spells on you!")
			.goto()
		//Returns to orignal menu, minus the option picked.
		opt1
			.option("Why did Josef run away?")
			.playerl("Why did Josef run away?")
			.npcl("Obviously he was a coward who did not have the strength to abandon his old-fashioned morality. I hope you will not be a similar disappointment.")
			.goto()
		opt1
			.option("I forgot the incantation.")
			.playerl("I forgot the incantation.")
			.npcl("Ignoramus! Are you incapable of even the simplest task? The incantation is Caldar Agrith-Naar Nahudu Camerinthum Tarren.")
			.end()
	//after showing Matthew the book you found in the kiln
		b.onQuestStage(SHADOW_OF_THE_STORM, 7)	
			.npcl("It is time for the ritual to commence!")
			.end()
	//go stand in your spot in the circle and click on the demonic sigil to start the next cutscene. Or you can talk to everyone first.
		b.onQuestStage(SHADOW_OF_THE_STORM, 8)	
			.npcl("Get to your place in the circle, fool! I want you to lead these dunderheads in the summoning ritual!")
			.options()
		opt1
			.option("Okay")
			.playerl("Okay")
			.end()
		opt1
			.option("I forgot the incantation.")
			.playerl("I forgot the incantation.")
			.npcl("Ignoramus! Are you incapable of even the simplest task? The incantation is Caldar Agrith-Naar Nahudu Camerinthum Tarren.")
			.end()
	}
}

//Talking to Tanya after learning from Denath that you need a demonic sigil. The wiki mentions a cutscene for Tanya but I can't find a video source on it. https://runescape.wiki/w/Transcript:Shadow_of_the_Storm#Tanya

class TanyaDialogue : DialogueBuilderFile() {
    override fun create(b: DialogueBuilder) {
        b.onQuestStage(SHADOW_OF_THE_STORM, 4)
			.npcl("Soon, all will bow down before me!")
			.options()
		opt1
			.option("Oh?")
			.playerl("Oh?")
			.npcl("Agrith Naar will make us the rulers of the world! I shall be a dark queen over all Gielinor! All shall love me and despair!")
			.npcl("Ha ha ha ha!")
			.npcl("Ah ha ha ha ha!!")
			.npcl("AAH HA HA HA HA HAAAAA!!!!")
			.npcId(NPCs.Jennifer_2913, "Look, we've told you not to do that. It makes everyone uncomfortable.")
			.npcl("Sorry.")
			.end()
		opt1
			.option("Do you have the demonic sigil mould?")
			.playerl("Do you have the demonic sigil mould?")
			.npcl("Hah! Carrying such humble implements is beneath me!")
			.end()
		opt1
			.option("Do you know what happened to Josef?")
			.playerl("Do you know what happened to Josef?")
			.npcl("He was a fool who could not cope with power! When Agrith Naar makes us rulers of continents, I will find him and crush him!")
			.end()
		b.onQuestStage(SHADOW_OF_THE_STORM, 8)	
			.npcl("Get to your place in the circle! You're holding up the ritual!")
			.end()
	}
}

//Talk to Matthew after learning from Denath that you need a demonic sigil.

class MatthewDialogue : DialogueBuilderFile() {
    override fun create(b: DialogueBuilder) {
        b.onQuestStage(SHADOW_OF_THE_STORM, 4)
			.npcl("Hello. Are you Josef's replacement?")
			.options()
		//Returns to original option menu, minus the selected option.
		opt1
			.option("Yes, I suppose I am.")
			.playerl("Yes, I suppose I am.")
			.npcl("It just goes to show how little Denath values us.")
			.playerl("What do you mean?")
			.npcl("Denath told us we would learn the secrets of demonic magic, but all we've done is memorize one incantation. And now he replaces poor Josef with the next person who comes along!")
			.goto()
		opt1
			.option("Do you have the demonic sigil mould?")
			.playerl("Do you have the demonic sigil mould?")
			.npcl("No, I think Jennifer has it.")
			.end()
		//this probably sets a stage for you to go find the book.
		opt1
			.option("Do you know what happened to Josef?")
			.playerl("Do you know what happened to Josef?")
			.npcl("Shh! Listen, Denath doesn't know this...")
			.npc1("When we joined him, Denath told us we were going to learn all the secrets of demonic magic, but we still don't know anything.")
			.npcl("The others, they just think they're terribly evil, with their sigils and the incantation they learned by rote. But Josef and I wanted more - we wanted to know how it worked.")
			.npcl("Josef was more curious than me. Last night, he secretly read a book that Denath was keeping from us. He didn't know I was awake, but I saw what happened.")
			.npcl("I saw him read it, and then his face turned white, and he took the book and ran through the portal.")
			.npcl("But Denath was waking up, and when he saw Josef was gone he went through the portal to look for him. A bit later Denath returned, without Josef or the book.")
			.npcl("Josef didn't have money for the magic carpet, and he can't have got far in the desert at night with that heavy book.")
			.npcl("Josef must have hidden the book somewhere in the ruins, before Denath followed him. If you could find it, we'd know what it was that frightened him. We'd know what Denath is really up to!")
			.end()
		b.onQuestStage(SHADOW_OF_THE_STORM, 6)
			.npcl("Did you find that book?")
			.playerl("Yes. The golem saw Josef hide it in one of the broken kilns in the city.")
			.npcl("Did the golem see what happened to Josef?")
			.playerl("It said Denath killed him.")
			.npcl("Oh no!")
			.npcl("I knew Denath was a dark wizard but I didn't think he'd kill one of his desciples.")
			.npcl("Let me look at the book then.")
		//this line shows the book on the left side of the chat box.
			.iteml(6749, ("Matthew quickly reads the book then hands it back to you.")
			.npcl("I don't understand. What's in here that Denath thought was worth killing over? Josef must have worked something out - but what?")
			.npcl("But look at the incantation in the book. The words are in the reverse order to the order that Denath taught us.")
			.playerl("The incantation in the book is backwards?")
			.npcl("More likely the book has the correct incantation and the one Denath taught us was backwards. But what does that mean?")
			.npcl("${player.name}, I'm not happy about this ritual. I don't think Agrith-Naar is going to grant all our wishes, I think he's going to kill us all. But if I try to stop it, Denath will kill me like he did Josef!")
			.playerl("Don't worry. I"m here to kill the demon!")
			.playerl("This is the demon-slaying sword Silverlight, the only weapon that can kill Agrith-Naar!")
			.npcl("Thank goodness! I think Denath is nearly ready for the ritual. We must prepare!")
			.end()
	//A timer of about 20 seconds starts after ending this dialogue with matthew. Then Denath announes he is ready and everyone begins to move to place. https://youtu.be/yEcesjzb94w?t=53
		b.onQuestStage(SHADOW_OF_THE_STORM, 8)	
			.npcl("This is it! Get to your place in the circle and say the words!")
			.end()
	//Talking to Matthew after Denath escaped after the incantation
		b.onQuestStage(SHADOW_OF_THE_STORM, 11)
			.npcl("We've got to perform the ritual again, forwards this time, so you can kill Agrith Naar. I'll prepare for it here while you find four more people.")
			.options()
		opt1
			.option("Okay.")
			.playerl("Okay.")
			.npcl("Hurry!")
			.end()
		opt1
			.option("I don't understand what happened!")
			.playerl("I don't understand what happened!")
			.npcl("Denath must have been Agrith Naar all along!")
			.npcl("Ellemar's book said that Agrith Naar can only use his powerful magics from the demon plane. Ellemar must have trapped him in human form to stop him using his magics.")
			.npcl("That must be what the last pages of the book said. So the reason he assembled us was to send him back to his own plane, where he would be much more powerful!")
			.npcl("That's why the ritual was backwards! He's already started to close the portal to trap us. Who knows what else he could do?")
			.npcl("But if we can perform the ritual forwards then you can kill him using Silverlight and end his evil magics once and for all!")
			.end()
	//Talking to Matthew after getting golem, reen and badden into the portal room.	
		b.onQuestStage(SHADOW_OF_THE_STORM, 12)
			.npcl("We've got eight people now. Are you ready to summon Agrith Naar and slay him?")
			.options()
	//Everyone goes back to circle if you select yes.	
		opt1	
			.option("Yes.")
			.playerl("Yes.")
			.npcl("But if we can perform the ritual forwards then you can kill him using Silverlight and end his evil magics once and for all!")
			.end()
		opt1	
			.option("No.")
			.playerl("No.")
			.npcl("Do hurry! We haven't got much time!")
			.end()			
		opt1
			.option("I don't understand what happened!")
			.playerl("I don't understand what happened!")
			.npcl("Denath must have been Agrith Naar all along!")
			.npcl("Ellemar's book said that Agrith Naar can only use his powerful magics from the demon plane. Ellemar must have trapped him in human form to stop him using his magics.")
			.npcl("That must be what the last pages of the book said. So the reason he assembled us was to send him back to his own plane, where he would be much more powerful!")
			.npcl("That's why the ritual was backwards! He's already started to close the portal to trap us. Who knows what else he could do?")
			.npcl("But if we can perform the ritual forwards then you can kill him using Silverlight and end his evil magics once and for all!")
			.end()	
	//Talking to Matthew after everyone is ready for the second ritual.
		b.onQuestStage(SHADOW_OF_THE_STORM, 13)
			.npcl("What are we waiting for? You must lead the ritual and kill Agrith Naar! We're all counting on you!")
			.end()
	}
}

//Talking to Patrick after learning from Denath that you need a demonic sigil.

class PatrickDialogue : DialogueBuilderFile() {
    override fun create(b: DialogueBuilder) {
        b.onQuestStage(SHADOW_OF_THE_STORM, 4)
			.npcl("Agrith Naar is going to make us all sooo rich!")
			.options()
		//Returns to original option menu, minus the selected option.
		opt1
			.option("Yeah! We'll all be rich! ")
			.playerl("Yeah! We'll all be rich! ")
			.npcl("Yeah! I'm going to get myself a dragon longsword! And a million rune ores! And a small piece of coloured paper to put on my head!")
			.playerl("Um... if you like.")
			.npcl("Those gems on the demon's throne look valuable. I just wish I had some way to remove them.")
			.end()
		opt1
			.option("Isn't it more satisfying to earn riches yourself? ")
			.playerl("Isn't it more satisfying to earn riches yourself?")
			.npcl("I don't want to be satisfied, I want to be rich!")
			.end()	
		opt1
			.option("Do you have the demonic sigil mould?")
			.playerl("Do you have the demonic sigil mould?")
			.npcl("Right now I don't have anything. But soon, I will have everything!")
			.end()
		opt1
			.option("Do you know what happened to Josef?")
			.playerl("Do you know what happened to Josef?")
			.npcl("Denath says he ran away. I don't know why. Who would want to run away from what Agrith Naar is going to do for us?")
			.end()
		b.onQuestStage(SHADOW_OF_THE_STORM, 8)	
			.npcl("Get to your place in the circle and lead the ritual! I'm so excited!")
			.end()
	//Talking to Patrick after Denath escaped after the incantation
		b.onQuestStage(SHADOW_OF_THE_STORM, 11)
			.npcl("Oh no! What are we going to do? What are we going to do?!!!")
			.end()
	//Talking to Patrick after getting golem, reen and badden into the portal room.	
		b.onQuestStage(SHADOW_OF_THE_STORM, 12)
			.npcl("I guess none of us are going to get rich now. Let's do what needs to be done!")
			.end()
	//During the fight with Agrith-Naar
		b.onQuestStage(SHADOW_OF_THE_STORM, 15)
			.npcl("Help! Quickly, use Silverlight!")
			.end()
	//After the quest
		b.onQuestStage(SHADOW_OF_THE_STORM, 100)
			.npcl("So Agrith Naar was trapped in our dimension all along, and didn't have any influence until the wizards un-summoned him?")
			.npcl("I thought slaying him would make the world better, but we've just returned it to how it was before!")
			.playerl("Perhaps we can't blame demons for everything that's wrong with the world. Sometimes it's just not that simple.")
			.end()
	//During the fight with Agrith-Naar
		b.onQuestStage(SHADOW_OF_THE_STORM, 15)
			.npcl("Help! Save me from the demon!")
			.end()
	//After the quest
		b.onQuestStage(SHADOW_OF_THE_STORM, 100)
			.npcl("So Agrith Naar was never going to do anything for us. I suppose I'll have to make my fortune the hard way!")
			.end()
	}
}

//Talking to Eric after learning from Denath that you need a demonic sigil. Wiki states a funny interaction with Eric if you walk away while he is talking. https://runescape.wiki/w/Transcript:Shadow_of_the_Storm#Clicking_away_from_dialogue

class EricDialogue : DialogueBuilderFile() {
    override fun create(b: DialogueBuilder) {
        b.onQuestStage(SHADOW_OF_THE_STORM, 4)
			.npcl("They won't ignore me for much longer!")
			.options()
		opt1
			.option("Who?")
			.playerl("Who?")
			.npcl("Everyone! When I have demonic powers, they'll all have to pay attention to me! And SHE won't ignore me then.")
			.npcl("I'll be able to show her how I feel. I will make everyone like me!")
			.end()
		opt1
			.option("Do you have the demonic sigil mould?")
			.playerl("Do you have the demonic sigil mould?")
			.npcl("No. I gave it to Matthew.")
			.end()
		opt1
			.option("Do you know what happened to Josef?")
			.playerl("Do you know what happened to Josef?")
			.npcl("He went away and left us. He probably didn't like me.")
			.end()
		b.onQuestStage(SHADOW_OF_THE_STORM, 8)	
			.npcl("We'd better do the ritual!")
			.end()	
	}
}

//Talking to Jennifer after learning from Denath that you need a demonic sigil.

class JenniferDialogue : DialogueBuilderFile() {
    override fun create(b: DialogueBuilder) {
        b.onQuestStage(SHADOW_OF_THE_STORM, 4)
			.npcl("Huh.")
			.options()
		opt1
			.option("What?")
			.playerl("What?")
			.npcl("You don't understand.")
			.options()
		opt2	
			.option("Understand what?")
			.playerl("Understand what?")
			.npcl("Nobody understands.")
			.options()
		opt3
			.option("What don't we understand?")
			.playerl("What don't we understand?")	
			.npcl("Oh, it doesn't matter. You don't understand. Go away.")
			.end()
		//Gives demonic sigil mould.
		opt1
			.option("Do you have the demonic sigil mould?")
			.playerl("Do you have the demonic sigil mould?")
			.npcl("Huh. So that's all you want. Here it is.")
			.playerl("Thanks!")
			.npcl("Huh.")
			.end()
		opt1
			.option("Do you know what happened to Josef?")
			.playerl("Do you know what happened to Josef?")
			.npcl("He didn't understand!")
			.playerl("No, I don't suppose he did.")
			.end()
		b.onQuestStage(SHADOW_OF_THE_STORM, 8)	
			.npcl("You ought to get to your place in the circle. Denath wants YOU to lead the ritual.")
			.end()	
	//Talking to Jennifer after Denath escaped after the incantation
		b.onQuestStage(SHADOW_OF_THE_STORM, 11)
			.npcl("We should have known it was too good to be true. It's always the same, everyone wants to use you. Even demons.")
			.end()
	//Talking to Jennifer after everyone is ready for the second ritual.
		b.onQuestStage(SHADOW_OF_THE_STORM, 13)
			.npcl("You ought to get to the head of the circle and lead the incantation. Let's get this over with.")
			.end()
	//During the fight with Agrith-Naar
		b.onQuestStage(SHADOW_OF_THE_STORM, 15)
			.npcl("Help!")
			.end()
	//After the quest
		b.onQuestStage(SHADOW_OF_THE_STORM, 100)
			.npcl("At least that's all over.")
			.end()
	}
}

//If you look in the wrong kiln for the book.
//	.line("You look in the kiln but you see only sand and fragments of ancient golems.")
//If you look in the right kiln for the book. it also shows a picture of the book to the left of the words.
//	.iteml(6749, ("You find a book in the kiln.")

val The_Confession_of_Ellemar = arrayOf(
    PageSet(
        Page(
            BookLine("I know that it is too late", 55),
            BookLine("to prevent my execution,", 56),
            BookLine("and I do not dispute the", 57),
            BookLine("letter of the charges", 58),
            BookLine("against me. I did read", 59),
            BookLine("forbidden books, and I", 60),
            BookLine("did perform unholy", 61),
            BookLine("rituals forbidden by the", 62),
            BookLine("Church of Saradomin.", 63),
            BookLine("But I hope to show by", 64),
            BookLine("this account that I did", 65),
        ),
        Page(
            BookLine("not blaspheme against", 66),
            BookLine("holy Saradomin but", 67),
            BookLine("rather acted in his spirit.", 68),
            BookLine("", 69),
            BookLine("For as long as we know,", 70),
            BookLine("those who worship", 71),
            BookLine("Saradomin have fallen", 72),
			Bookline("prey to demons, both", 73),
			Bookline("those that are summoned", 74),
			Bookline("by dark wizards and", 75),
			Bookline("those that live wild in the", 76),
        )
    ),
    PageSet(
        Page(
            BookLine("way that unholy magic", 55),
            BookLine("could be used for a holy", 56),
            BookLine("purpose.", 57),
            BookLine("", 58),
            BookLine("Not all demons are most", 59),
            BookLine("dangerous when they are", 60),
            BookLine("on our plane as physical", 61),
            BookLine("being. There is also a", 62),
            BookLine("more subtle demonic", 63),
            BookLine("influence that prevades", 64),
            BookLine("our world, with demons", 65),
        ),
        Page(
            BookLine("working behind the scenes", 66),
            BookLine("to cause natural disaters", 67),
            BookLine("and accidents. the chief", 68),
            BookLine("among these demons is", 69),
            BookLine("Agrith-Naar.", 70),
            BookLine("", 71),
            BookLine("If Agrith-Naar were to", 72),
            BookLine("be removed from his own", 73),
            BookLine("dimension he would be", 74),
            BookLine("unable to work his magic", 75),
            BookLine("on the world, and so I", 76),
        )
    ),
    PageSet(
        Page(
            BookLine("came to beleive that", 55),
            BookLine("summoning him would", 56),
            BookLine("not be an evil act, but a", 57),
            BookLine("good one. Therefore I", 58),
            BookLine("secretly studied the", 59),
            BookLine("forbidden books and", 60),
            BookLine("conducted magical", 61),
            BookLine("experiments, until I had", 62),
            BookLine("discovered the means by", 63),
            BookLine("which Agrith-Naar could", 64),
            BookLine("be summoned. The", 65),
        ),
        Page(
            BookLine("process of preparation", 66),
            BookLine("was complex, but the most", 67),
            BookLine("important part was the", 68),
            BookLine("construction of a sigil of", 69),
            BookLine("the demon out of silver.", 70),
            BookLine("The final act was for", 71),
            BookLine("eight persons, each", 72),
            BookLine("holding such a sigil, to", 73),
            BookLine("recite the following", 74),
            BookLine("incantation:", 75),
        )
    ),
    PageSet(
        Page(
            BookLine("Terren Camerinthum", 55),
            BookLine("Nahudu Agrith-Naar", 56),
            BookLine("Caldar", 57),
            BookLine("", 58),
            BookLine("The ritual was a success,", 59),
            BookLine("and the great demon", 60),
            BookLine("Agrith-Naar appeared", 61),
            BookLine("before us. We had", 62),
            BookLine("prepared a magical cage,", 63),
			BookLine("and with dificulty we", 64),
            BookLine("imprisoned the demon.", 65),
        ),
        Page(
            BookLine("However, we were unable", 66),
            BookLine("to destroy him, though we", 67),
            BookLine("tried every physical and", 68),
            BookLine("amgical means.", 69),
            BookLine("Furthermore, the magical", 70),
            BookLine("cage was weakoning, and", 71),
            BookLine("we feared it would not be", 72),
            BookLine("able to contain him for", 73),
            BookLine("long. Therefore we", 74),
            BookLine("decided to", 75),
        )
    ),
    PageSet(
        Page(
            BookLine("(The last pages of the", 55),
            BookLine("book have been torn out)", 56),
        )
    )
)

//Starting the ritual. Clicking on the sigil while you were in place starts an interacable cutscene with sigil menu. https://youtu.be/kXcdMqERqog?t=822	
//when you select a word from the menu you say it; everyone says it over their heads and you return to the menu
//If you say the wrong incantation. Denath tells you to try again. "You fool! Do it again, and get it right!", if you get it right text appears .line("A magic circle appears in the floor...")	

class DemonicSigilDialogue : DialogueBuilderFile() {
    override fun create(b: DialogueBuilder) {
		b.onQuestStage(SHADOW_OF_THE_STORM, 9)
			.options()
		opt1
			.option("Caldar")
			.playerl("Caldar...")
			.goto()
		opt1	
			.option("Nahudu")
			.playerl("Nahudu...")
			.goto()
		opt1	
			.option("Agrith-Naar")
			.playerl("Agrith-Naar...")
			.goto()
		opt1	
			.option("Camerinthum")
			.playerl("Camerinthum...")
			.goto()
		opt1	
			.option("Tarren")
			.playerl("Tarren...")
			.goto()	
			.line("A magic circle appears in the floor...")	
	}
}

//Going to break this part into a different dialogue area. After you say the correct words Denath disappears and leaves his sigil on the ground. Since jennifer starts the dialogue I will use her name on the start of it.

class JenniferDialogue : DialogueBuilderFile() {
    override fun create(b: DialogueBuilder) {
        b.onQuestStage(SHADOW_OF_THE_STORM, 10)
			.npcl("Oh my gods!")
			.npcId(NPCs.Eric_2906, "He disappeared")
			.npcId(NPCs.Patrick_2917, "Where'd he go?")
			.npcId(NPCs.Matthew_2911, "Of course! How could we be so stupid?")
			.playerl("What happened?")
			.npcId(NPCs.Matthew_2911, "What do you get when you perform a summoning ritual backwards?")
			.npcId(NPCs.Matthew_2911, "Denath was Agrith-Naar all along! We've just helped him return to his own dimension!")
			.line("BOOM!")	
			.npcl("What was that?!")
			.npcId(NPCs.Tanya_2915, "Look! The portal's closing!")
			.npcId(NPCs.EvilDave_2910, "I'm getting out of here!")
			.npcId(NPCs.Matthew_2911, "No, don't leave!")
			.npcId(NPCs.Matthew_2911, "Who knows what Denath could do now?")
			.npcId(NPCs.Matthew_2911, "We've got to perform the ritual again so yo ucan kill Agrith-Naar. But we need eight people!")
			.npcId(NPCs.Matthew_2911, "Quick, ${player.name}, you've got to get those three to come back! And you'd better take Denath's sigil and find one more person to help.")
			.end()	
	}
}

//You leave the through the portal to witness Tanya killed by ghosts.
//The chat box says. .line("You see Tanya killed by ghosts!")
//You see Eric's ben killed by stones that fell from the ceiling. Examine text says. player.sendMessage"Eric's been killed by stones falling from the ceiling!"
//When you are leaving the area after talking to dave you will get hit by falling rocks for 1 damage. https://youtu.be/kXcdMqERqog?t=958 and the chat box says player.sendMessage"You are hit by falling rocks!"
//When you are back out in the area where the Golem is the chat box says player.sendMessage"You must fight your way against a sandstorm!"


//Now Agrith Naar appears after saying the incantation bawards.

class AgrithNaarDialogue : DialogueBuilderFile() {
    override fun create(b: DialogueBuilder) {
        b.onQuestStage(SHADOW_OF_THE_STORM, 15)
			.npcl("Matthew!")
			.npcl("How dare you summon me?")
		//Agrith Naar shoots a fire spell at Matthew
			.npcId(NPCs.Matthew_2911, "Aaaargh!")
			.playerl("He didn't summon you.")
			.playerl("I did!")
			.npcl("Then prepare to die!")
			.end()	
	}
}

//There is a special chat box for landing the final blow on Agrith-Naar. Darklight appears on the left of it.
//	.iteml(6746, ("As you strike the final blow, Silverlight is drenched with Agrith-Naar's fould-smelling ichor!")\
//	.iteml(6746, ("You try to wipe Silverlight clean, but Agrith-Naar's blood has fused with the blade. You heft the sword and sense that it has become more powerful.")
//this line follows next with no picture next to it.
//	.line("You feel the power flowing up into your arm. You can direct it into any combat skill...")
//Then you get to select a skill to put experience into. https://youtu.be/kXcdMqERqog?t=1200
//			.options()
//		opt1
//			.option("* Strength *")
//			.end()
//		opt1
//			.option("* Attack *")
//			.end()
//		opt1
//			.option("* Defence *")
//			.end()
//		opt1
//			.option("--- More ---")	
//			.goto()
//		opt1
//			.option("* Hitpoints *")
//			.end()
//		opt1
//			.option("* Magic *")
//			.end()
//		opt1
//			.option("* Ranged *")
//			.end()
//		opt1
//			.option("--- Previous ---")	
//			.goto()


//Quest complete. The redout on the quest compelete scroll depends on what skill you chose to put experience towards.