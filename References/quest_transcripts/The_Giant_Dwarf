The Giant Dwarf

// Speaking to Dwarven Boatman to start quest

class DwarvenBoatmanDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl("Ho there, human").also { stage++ }
            1 -> playerl("${player.name}").also { stage++ }
            2 -> npcl("Ho there, ${player.name}! Want to take a ride with me?").also { stage++ }
            3 -> playerl("Where are you Going? Across the river?").also { stage++ }
            4 -> npcl("No no, that's what the ferryman is for! I'm going to Keldagrim, my home!").also { stage++ }
            5 -> playerl("How much will that cost me then?").also { stage++ }
            6 -> npcl("For a human like you, I can do it for free!").also { stage++ }
            7 -> options("That's a deal!", "I prefer the mines to the city.").also { stage++ }
            8 -> when(buttonID) {
                1 -> playerl("That's a deal!").also { stage = 9 }
                2 -> playerl("I prefer the mines to the city.").also { stage = END_DIALOGUE }
            }
            9 -> npcl("Excellent! I'm just waiting for my ship to arrive and then we can go.").also { stage++ }
            10 -> npcl("Mind, this trip could take a few minutes! Are you sure you're ready to go as well?").also { stage++ }
            11 -> options("Yes, I'm ready and don't mind it taking a few minutes.", "No, I don't have time right now, I'll be back later.").also { stage++ }
            12 -> when(buttonID) {
                1 -> playerl("Yes, I'm ready and don't mind it taking a few minutes.").also { stage = 13 }
                2 -> playerl("No, I don't have time right now, I'll be back later.").also { stage = END_DIALOGUE }
            }
            13 -> npcl(FacialExpression.OLD_DEFAULT, "Well, let's not waste any more time then!").also { stage = END_DIALOGUE }
        }
    }
}
//If the player goes back to the boatman//

class DwarvenBoatmanDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl("Hello again, ${player.name}! Want to go back to Keldagrim?").also { stage++ }
            1 -> options("Please take me.", "What, on your ship? No way.").also { stage++ }
            3 -> when(buttonID) {
                1 -> playerl("Please take me.").also { stage = END_DIALOGUE }
                2 -> playerl("What, on your ship? No way.").also { stage = END_DIALOGUE }
            }
        }
    }
}
/* First there is some cinematic text.
 * Five hundred years have passed since the rule of King Alvis, saviour of Keldagrim, victim of his own intentions.
 * He founded the Consortium: the gathering of mining companies that were to serve the monarchy. But eventually the monarchy came to serve the Consortium.
 * By the time of his death, the monarchy was all but abolished.
 * Now the Kings in Keldagrim are but a distant memory, with only the statue of King Alvis to remind the people of the old days. The dark days.
 */


/*
 * Dwarven Boatman dialogue during cutscene.
 */
class BoatmanCutsceneDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl("Look, there's the statue of King Alvis, guarding the entrance to Keldagrim!").also { stage++ }
            1 -> playerl("Amazing! And we're going to go straight past it?").also { stage++ }
            2 -> npcl("That's right!").also { stage++ }
            3 -> npcl(FacialExpression.OLD_DEFAULT, "Er, hold on! There's something wrong!").also { stage++ }
            4 -> Both("Argh!").also { stage = END_DIALOGUE }
        }
    }
}
/*
 * On the Dock after boat crash cutscene.
 */

class DockCutsceneDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl("Halt! By order of the Black Guard, you are under arrest!").also { stage++ }
            1 -> playerl("What?? I didn't do anything! It wasn't me!").also { stage++ }
            2 -> npcl("Come with us, human! Commander Veldaban wants a word with you!").also { stage = END_DIALOGUE }
        }
    }
}

//Speaking to Commander Veldaban after being aressted on dock//

class CommanderVeldabanDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl("Identify yourself, human!").also { stage++ }
            1 -> playerl("I err, I'm ${player.name}. I was told I was under arrest. I had a little accident on the way in here.").also { stage++ }
            2 -> npcl("Ah, so you're the one who knocked over the statue of our glorious king!").also { stage++ }
            3 -> playerl("I suppose so... I mean, I didn't do it on purpose or anything...").also { stage++ }
            4 -> npcl("Ah, don't worry about it!").also { stage++ }
            5 -> npcl("We haven't been ruled by a king for many a year... that statue was long overdue for a replacement anyway. You're not under arrest, I merely wanted to talk to you.").also { stage++ }
            6 -> npcl("But let me introduce myself. I am Veldaban, son of Dondakan. I am the commander of the Black Guard in Keldagrim.").also { stage++ }
            7 -> playerl("Well, ehm... nice to meet you, Veldaban.").also { stage++ }
            8 -> npcl("Now listen carefully. I have a task for you.").also { stage++ }
            9 -> npcl("I want you to go and see the local sculptor and help him build a new statue.").also { stage++ }
            10 -> npcl("Will you do this for us?").also { stage++ }
            11 -> options("No, I can't be bothered.", "Yes, I will do this.").also { stage++ }
            12 -> when(buttonID) {
                1 -> playerl("No, I can't be bothered.").also { stage = 20 }
                2 -> playerl("Yes, I will do this.").also { stage = 13 }
            }
            13 -> npcl(FacialExpression.OLD_DEFAULT, "You are a good human, ${player.name}.").also { stage++ }
            14 -> npcl("Now, I need you to go to Blasidar, He is a sculptor who lives in Keldagrim-East.").also { stage++ }
            15 -> playerl("To be honest I'm not much of a sculptor myself.").also { stage++ }
            16 -> npcl(FacialExpression.OLD_DEFAULT, "Oh, don't worry!").also { stage++ }
            17 -> npcl(FacialExpression.OLD_DEFAULT, "I just need you to help him out while he rebuilds the statue.").also { stage++ }
            18 -> npcl(FacialExpression.OLD_DEFAULT, "I'm sure there are many tasks that he needs doing.").also { stage++ }
            19 -> playerl("I'll see what I can do.").also { stage = END_DIALOGUE }
            20 -> npcl(FacialExpression.OLD_DEFAULT, "You destroy our statue and you cannot be bothered to help rebuild it? By Guthix, you are rude... even for a human!").also { stage = END_DIALOGUE }
        }
    }
}
//If you tried to talk to Riki the sculptor's model before Blasidar and after Commander Veldaban//

class RikiDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> playerl("Hello there, can you help me?").also { stage++ }
            1 -> npcl(FacialExpression.OLD_DEFAULT, "Talk... to Blasidar.").also { stage++ }
            2 -> playerl("What? No, I was wondering if you could help me.").also { stage++ }
            3 -> npcl(FacialExpression.OLD_DEFAULT, "Talk... to Blasidar.").also { stage++ }
            4 -> playerl("Alright, alright.").also { stage = END_DIALOGUE }
        }
    }
}
//Speaking to Blasidar the sculptor for the first time//

class BlasidarDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> playerl("Excuse me, are you Blasidar, the famous sculptor?").also { stage++ }
            1 -> npcl(FacialExpression.OLD_DEFAULT, "Why, yes, yes, that I am!").also { stage++ }
            2 -> playerl("Oh, well, I'm ${player.name}. Veldaban of the Black Guard sent me to you, you see. Said you might need some help with the statue.").also { stage++ }
            3 -> npcl(FacialExpression.OLD_DEFAULT, "Oh, I don't need an assistant sculptor, really, I can do just fine on my own.").also { stage++ }
            4 -> playerl("I'm not a sculptor").also { stage++ }
            5 -> npcl("And I've also got a model here, you see, to base my statue on.").also { stage++ }
            6 -> playerl("I'm not a model!").also { stage++ }
            7 -> npcl(FacialExpression.OLD_DEFAULT, "But come to think of it, I do need some errands run. Yes, quite important errands too.").also { stage++ }
            8 -> npcl("Yes, you will do just fine").also { stage++ }
            9 -> playerl("Ehm, right, okay.").also { stage++ }
            10 -> playerl("So what did you need doing?").also { stage++ }
            11 -> npcl("Well, see... the Consortium has commisioned me to rebuild the statue exactly the way it was.").also { stage++ }
            12 -> npcl("But the statue itself has broken into a million pieces... and we dwarves aren't very good painters, you know, so we don't have any paintings of it either.").also { stage++ }
            13 -> playerl("Not a very artistic race, then, are you?").also { stage++ }
            14 -> npcl(FacialExpression.OLD_DEFAULT, "No, that's not what I said, I said we're not very good painters.").also { stage++ }
            15 -> npcl("We're excellent with, for example, stone. Oh yes, quite good if I say so myself.").also { stage++ }
            16 -> npcl ("But I digress... simply speaking, I need some help with getting some items that I can base the new statue on.").also { stage++ }
            17 -> npcl(FacialExpression.OLD_DEFAULT, "Will you be able to help me with this, ${player.name}?").also { stage++ }
            18 -> options("No, I can't be bothered.", "Yes, I will do this.").also { stage++ }
            19 -> when(buttonID) {
                1 -> playerl("No, I can't be bothered.").also { stage = 29 }
                2 -> playerl("Yes, I will do this.").also { stage = 20 }
            }
            20 -> npcl(FacialExpression.OLD_DEFAULT, "Excellent, excellent! Now what I need is the following...").also { stage++ }
            21 -> npcl(FacialExpression.OLD_DEFAULT, "I will need a pair of boots, the most exquisite boots you can find. The more they look like the original the better, but I don't think you'll be able to find an exact match.").also { stage++ }
            22 -> npcl(FacialExpression.OLD_DEFAULT, "For the torso, I need clothes that look like King Alvis' vlothes, I'm not sure where you would be able to find that, but I'm sure you'll manage.").also { stage++ }
            23 -> npcl(FacialExpression.OLD_DEFAULT, "Also, I need a battleaxe. Now this is particularly important. You are in luck, however, as I believe King Alvis' original axe still survives.").also { stage++ }
            24 -> playerl("Right, so I need a pair of boots, a piece of blothing and a battleaxe. Is that all?").also { stage++ }
            25 -> npcl(FacialExpression.OLD_DEFAULT, "For now, ${player.name}, for now! I wish you good luck, and hurry back with the items!").also { stage++ }
            26 -> playerl("But... wait, wait, how am I supposed to find all this?").also { stage++ }
            27 -> npcl(FacialExpression.OLD_DEFAULT, "I don't know! You're supposed to find that out for me!").also { stage++ }
            28 -> npcl(FacialExpression.OLD_DEFAULT, "But it's a beautiful city, Keldagrim is, I'm sure you'll see many things while you do these tasks!").also { stage = END_DIALOGUE }
            29 -> npcl(FacialExpression.OLD_DEFAULT, "How rude is that? I don't think the Black Guard will be very pleased with you!").also { stage = END_DIALOGUE }
        }
    }
}
//Talking to Blasidar after initially declining the quest//

class BlasidarDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> playerl("What was it you needed doing again?").also { stage++ }
            1 -> npcl("Well, see... the Consortium has commisioned me to rebuild the statue exactly the way it was.").also { stage++ }
            2 -> npcl("But the statue itself has broken into a million pieces... and we dwarves aren't very good painters, you know, so we don't have any paintings of it either.").also { stage++ }
            3 -> playerl("Not a very artistic race, then, are you?").also { stage++ }
            4 -> npcl(FacialExpression.OLD_DEFAULT, "No, that's not what I said, I said we're not very good painters.").also { stage++ }
            5 -> npcl("We're excellent with, for example, stone. Oh yes, quite good if I say so myself.").also { stage++ }
            6 -> npcl ("But I digress... simply speaking, I need some help with getting some items that I can base the new statue on.").also { stage++ }
            7 -> npcl(FacialExpression.OLD_DEFAULT, "Will you be able to help me with this, ${player.name}?").also { stage++ }
            8 -> options("No, I can't be bothered.", "Yes, I will do this.").also { stage++ }
            9 -> when(buttonID) {
                1 -> playerl("No, I can't be bothered.").also { stage = 19 }
                2 -> playerl("Yes, I will do this.").also { stage = 10 }
            }
            10 -> npcl(FacialExpression.OLD_DEFAULT, "Excellent, excellent! Now what I need is the following...").also { stage++ }
            11 -> npcl(FacialExpression.OLD_DEFAULT, "I will need a pair of boots, the most exquisite boots you can find. The more they look like the original the better, but I don't think you'll be able to find an exact match.").also { stage++ }
            12 -> npcl(FacialExpression.OLD_DEFAULT, "For the torso, I need clothes that look like King Alvis' vlothes, I'm not sure where you would be able to find that, but I'm sure you'll manage.").also { stage++ }
            13 -> npcl(FacialExpression.OLD_DEFAULT, "Also, I need a battleaxe. Now this is particularly important. You are in luck, however, as I believe King Alvis' original axe still survives.").also { stage++ }
            14 -> playerl("Right, so I need a pair of boots, a piece of blothing and a battleaxe. Is that all?").also { stage++ }
            15 -> npcl(FacialExpression.OLD_DEFAULT, "For now, ${player.name}, for now! I wish you good luck, and hurry back with the items!").also { stage++ }
            16 -> playerl("But... wait, wait, how am I supposed to find all this?").also { stage++ }
            17 -> npcl(FacialExpression.OLD_DEFAULT, "I don't know! You're supposed to find that out for me!").also { stage++ }
            18 -> npcl(FacialExpression.OLD_DEFAULT, "But it's a beautiful city, Keldagrim is, I'm sure you'll see many things while you do these tasks!").also { stage = END_DIALOGUE }
            19 -> npcl(FacialExpression.OLD_DEFAULT, "How rude is that? I don't think the Black Guard will be very pleased with you!").also { stage = END_DIALOGUE }
        }
    }
}
//If you talk to Riki the sculptor's model after accepting the request from Blasidar//

class RikiDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> playerl("Don't worry, I'll be back later with all those items!").also { stage = END_DIALOGUE }
        }
    }
}
//Speaking to Blasidar the sculptor without the requested items. Boots, clothes and axe.//

class BlasidarDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl(FacialExpression.OLD_DEFAULT, "How are you getting along with those items, ${player.name}").also { stage++ }
            1 -> playerl("I don't have your boots yet").also { stage++ }
            2 -> npcl(FacialExpression.OLD_DEFAULT, "What else?").also { stage++ }
            3 -> playerl("I also don't have your clothes yet, I'm afraid.").also { stage++ }
            4 -> npcl(FacialExpression.OLD_DEFAULT, "And? The battleaxe?").also { stage++ }
            5 -> playerl("Sorry, no, I'm still looking for it.").also { stage++ }
            6 -> npcl(FacialExpression.OLD_DEFAULT, "Look a little harder please!").also { stage = END_DIALOGUE }
        }
    }
}
//Speaking to Santiri for the first if The Knight's Sword quest was completed beforehand//

class SantiriDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl("Welcome, human, to the Quality Weapons Shop! Can I interest you in a purchase?").also { stage++ }
            1 -> options("Yes, I'm looking for some weapons.", "Yes, I'm looking for a particular battleaxe.", "No thanks.").also { stage++ }
            2 -> when(buttonID) {
                1 -> playerl("Yes, I'm looking for some weapons.").also { npc.openShop(player) }
                2 -> playerl("Yes, I'm looking for a particular battleaxe.").also { stage = 3 }
                3 -> playerl("No thanks.").also { stage = END_DIALOGUE }
            }
            3 -> npcl(FacialExpression.OLD_DEFAULT, "Fancy a particular colour then? Blue is quite popular at the moment, and red is on the rise.").also { stage++ }
            4 -> playerl("No, actually, I'm looking for King Alvis' axe.").also { stage++ }
            5 -> npcl("The King's axe!").also { stage++ }
            6 -> npcl("What would a human want with it?").also { stage++ }
            7 -> playerl("I've been tasked by Veldaban, Commander of the Black Guard in Keldagrim, to assist in every way possible with the rebuilding of King Alvis' statue.").also { stage++ }
            8 -> npcl("Oh yes, the statue... a most unfortunate incident.").also { stage++ }
            9 -> npcl("Not that I'm entirely sure that it was merely an accident, of course.").also { stage++ }
            10 -> playerl("How do you mean?").also { stage++ }
            11 -> npcl("I'm not entirely sure what I mean, human. But the axe, you say, what exactly did you need it for?").also { stage++ }
            12 -> options("Just give me the axe already, I know you have it!", "Blasidar the sculptor needs it for his statue.", "I don't really care for it after all.").also { stage++ }
            13 -> when(buttonID) {
                1 -> playerl("Just give me the axe already, I know you have it!").also { stage = 15 }
                2 -> playerl("Blasidar the sculptor needs it for his statue.").also { stage = 17 }
                3 -> playerl("I don't really care for it after all.").also { stage = 14 }
            }
            14 -> npcl(FacialExpression.OLD_DEFAULT, "Then stop wasting my time.").also { stage = END_DIALOGUE }
            15 -> npcl(FacialExpression.OLD_DEFAULT, "I'll give it to you, embedded into your head!").also { stage++ }
            16 -> playerl("I've had just about enough of this! Goodbye!").also { stage = END_DIALOGUE }
            17 -> npcl(FacialExpression.OLD_DEFAULT, "And so it does!").also { stage++ }
            18 -> npcl("It's been in my family's care for a few generations now, after it has been lost for a long time.").also { stage++ }
            19 -> playerl("What happened to it?").also { stage++ }
            20 -> npcl("I do not know how it got lost, but my great-grandfather found it at the banks of the Kelda, further downstream from the city.").also { stage++ }
            21 -> playerl("Can I see it?").also { stage++ }
            22 -> npcl("There is not much left to it, to be honest. The blade has almost compeltely rusted away, and the sapphires on the hilt were either stolen or were washed away by the river before it was found.").also { stage++ }
            23 -> npcl("I doubt it is useful to Blasidar in this state, master sculptor though he is.").also { stage++ }
            24 -> playerl("Are you sure this is the real axe then?").also { stage++ }
            25 -> npcl("Not entirely, no, but it matches the description well enough, and the holes for the sapphires are still clearly visible on the hilt. But since no one has a similar claim, I don't really care. It's genuine to me.").also { stage++ }
            26 -> options("This is tedious, I've lost interest.", "Perhaps I can repair the axe?").also { stage++ }
            27 -> when(buttonID) {
                1 -> playerl("This is tedious, I've lost interest.").also { stage = 28 }
                2 -> playerl("Perhaps I can repair the axe?").also { stage = 29 }
            }
            28 -> npcl("I'll get back to work then.").also { stage = END_DIALOGUE }
            29 -> npcl("On your own? I doubt it. The sapphires, perhaps, if you are a skilled enough crafter. But the blade...").also { stage++ }
            30 -> npcl("You're a decent smith, but this is far beyond your capabilities.").also { stage++ }
            31 -> npcl("What you need is the skills of an Imcando dwarf... but they must all be dead by now.").also { stage++ }
            32 -> playerl("Oh, I know where the find an Imcando dwarf!").also { stage++ }
            33 -> playerl("He actually made a sword for me a while ago. I'm sure I can get him to help me again.").also { stage++ }
            34 -> npcl("Really? That is amazing news.").also { stage++ }
            35 -> playerl("He lives on a cliff at the very south end of Asgarnia, just south of Port Sarim. I can visit him again if you like.").also { stage++ }
            36 -> npcl("Excellent! You can take a cart to Ice Mountain from the station here, that should help you get there faster.").also { stage++ }
            37 -> npcl("I will entrust you with King Alvis' battleaxe then, human.").also { stage++ }
            38 -> npcl("Help to restore it to its former glory!").also { stage++ }
            39 -> npcl("And please ask Blasidar to return it to me after he's done with it, I would sure love to see the restored blade again.").also { stage++ }
            40 -> playerl("Thank you. I will not disappoint you.").also { stage = END_DIALOGUE }
        }
    }
}

//Dialogue if The Knight's Sword quest was not completed beforehand//

class SantiriDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl("Welcome, human, to the Quality Weapons Shop! Can I interest you in a purchase?").also { stage++ }
            1 -> options("Yes, I'm looking for some weapons.", "Yes, I'm looking for a particular battleaxe.", "No thanks.").also { stage++ }
            2 -> when(buttonID) {
                1 -> playerl("Yes, I'm looking for some weapons.").also { npc.openShop(player) }
                2 -> playerl("Yes, I'm looking for a particular battleaxe.").also { stage = 3 }
                3 -> playerl("No thanks.").also { stage = END_DIALOGUE }
            }
            3 -> npcl(FacialExpression.OLD_DEFAULT, "Fancy a particular colour then? Blue is quite popular at the moment, and red is on the rise.").also { stage++ }
            4 -> playerl("No, actually, I'm looking for King Alvis' axe.").also { stage++ }
            5 -> npcl("The King's axe!").also { stage++ }
            6 -> npcl("What would a human want with it?").also { stage++ }
            7 -> playerl("I've been tasked by Veldaban, Commander of the Black Guard in Keldagrim, to assist in every way possible with the rebuilding of King Alvis' statue.").also { stage++ }
            8 -> npcl("Oh yes, the statue... a most unfortunate incident.").also { stage++ }
            9 -> npcl("Not that I'm entirely sure that it was merely an accident, of course.").also { stage++ }
            10 -> playerl("How do you mean?").also { stage++ }
            11 -> npcl("I'm not entirely sure what I mean, human. But the axe, you say, what exactly did you need it for?").also { stage++ }
            12 -> options("Just give me the axe already, I know you have it!", "Blasidar the sculptor needs it for his statue.", "I don't really care for it after all.").also { stage++ }
            13 -> when(buttonID) {
                1 -> playerl("Just give me the axe already, I know you have it!").also { stage = 15 }
                2 -> playerl("Blasidar the sculptor needs it for his statue.").also { stage = 17 }
                3 -> playerl("I don't really care for it after all.").also { stage = 14 }
            }
            14 -> npcl(FacialExpression.OLD_DEFAULT, "Then stop wasting my time.").also { stage = END_DIALOGUE }
            15 -> npcl(FacialExpression.OLD_DEFAULT, "I'll give it to you, embedded into your head!").also { stage++ }
            16 -> playerl("I've had just about enough of this! Goodbye!").also { stage = END_DIALOGUE }
            17 -> npcl(FacialExpression.OLD_DEFAULT, "And so it does!").also { stage++ }
            18 -> npcl("It's been in my family's care for a few generations now, after it has been lost for a long time.").also { stage++ }
            19 -> playerl("What happened to it?").also { stage++ }
            20 -> npcl("I do not know how it got lost, but my great-grandfather found it at the banks of the Kelda, further downstream from the city.").also { stage++ }
            21 -> playerl("Can I see it?").also { stage++ }
            22 -> npcl("There is not much left to it, to be honest. The blade has almost compeltely rusted away, and the sapphires on the hilt were either stolen or were washed away by the river before it was found.").also { stage++ }
            23 -> npcl("I doubt it is useful to Blasidar in this state, master sculptor though he is.").also { stage++ }
            24 -> playerl("Are you sure this is the real axe then?").also { stage++ }
            25 -> npcl("Not entirely, no, but it matches the description well enough, and the holes for the sapphires are still clearly visible on the hilt. But since no one has a similar claim, I don't really care. It's genuine to me.").also { stage++ }
            26 -> options("This is tedious, I've lost interest.", "Perhaps I can repair the axe?").also { stage++ }
            27 -> when(buttonID) {
                1 -> playerl("This is tedious, I've lost interest.").also { stage = 28 }
                2 -> playerl("Perhaps I can repair the axe?").also { stage = 29 }
            }
            28 -> npcl("I'll get back to work then.").also { stage = END_DIALOGUE }
            29 -> npcl("On your own? I doubt it. The sapphires, perhaps, if you are a skilled enough crafter. But the blade...").also { stage++ }
            30 -> npcl("You're a decent smith, but this is far beyond your capabilities.").also { stage++ }
            31 -> npcl("What you need is the skills of an Imcando dwarf... but they must all be dead by now.").also { stage++ }
            31 -> playerl("Perhaps I could try and find one?").also { stage++ }
            32 -> npcl(FacialExpression.OLD_DEFAULT, "Yes, perhaps, perhaps...").also { stage++ }
            33 -> npcl("Perhaps the librarian, just due east of here, can help you.").also { stage++ }
            34 -> npcl("Yes, I like the sound of this!").also { stage++ }
            35 -> npcl("I will entrust you with King Alvis' battleaxe, then, human.").also { stage++ }
            36 -> npcl("Help to restore it to its former glory!").also { stage++ }
            37 -> npcl("And please ask Blasidar to return it to me after he's done with it, I would sure love to see the restored blade again.").also { stage++ }
            38 -> playerl("Thank you. I will not disappoint you.").also { stage = END_DIALOGUE }
        }
    }
}
//Speaking to Santiri for the first if The Knight's Sword quest was completed beforehand and you have 99 smithing//

class SantiriDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl("Welcome, human, to the Quality Weapons Shop! Can I interest you in a purchase?").also { stage++ }
            1 -> options("Yes, I'm looking for some weapons.", "Yes, I'm looking for a particular battleaxe.", "No thanks.").also { stage++ }
            2 -> when(buttonID) {
                1 -> playerl("Yes, I'm looking for some weapons.").also { npc.openShop(player) }
                2 -> playerl("Yes, I'm looking for a particular battleaxe.").also { stage = 3 }
                3 -> playerl("No thanks.").also { stage = END_DIALOGUE }
            }
            3 -> npcl(FacialExpression.OLD_DEFAULT, "Fancy a particular colour then? Blue is quite popular at the moment, and red is on the rise.").also { stage++ }
            4 -> playerl("No, actually, I'm looking for King Alvis' axe.").also { stage++ }
            5 -> npcl("The King's axe!").also { stage++ }
            6 -> npcl("What would a human want with it?").also { stage++ }
            7 -> playerl("I've been tasked by Veldaban, Commander of the Black Guard in Keldagrim, to assist in every way possible with the rebuilding of King Alvis' statue.").also { stage++ }
            8 -> npcl("Oh yes, the statue... a most unfortunate incident.").also { stage++ }
            9 -> npcl("Not that I'm entirely sure that it was merely an accident, of course.").also { stage++ }
            10 -> playerl("How do you mean?").also { stage++ }
            11 -> npcl("I'm not entirely sure what I mean, human. But the axe, you say, what exactly did you need it for?").also { stage++ }
            12 -> options("Just give me the axe already, I know you have it!", "Blasidar the sculptor needs it for his statue.", "I don't really care for it after all.").also { stage++ }
            13 -> when(buttonID) {
                1 -> playerl("Just give me the axe already, I know you have it!").also { stage = 15 }
                2 -> playerl("Blasidar the sculptor needs it for his statue.").also { stage = 17 }
                3 -> playerl("I don't really care for it after all.").also { stage = 14 }
            }
            14 -> npcl(FacialExpression.OLD_DEFAULT, "Then stop wasting my time.").also { stage = END_DIALOGUE }
            15 -> npcl(FacialExpression.OLD_DEFAULT, "I'll give it to you, embedded into your head!").also { stage++ }
            16 -> playerl("I've had just about enough of this! Goodbye!").also { stage = END_DIALOGUE }
            17 -> npcl(FacialExpression.OLD_DEFAULT, "And so it does!").also { stage++ }
            18 -> npcl("It's been in my family's care for a few generations now, after it has been lost for a long time.").also { stage++ }
            19 -> playerl("What happened to it?").also { stage++ }
            20 -> npcl("I do not know how it got lost, but my great-grandfather found it at the banks of the Kelda, further downstream from the city.").also { stage++ }
            21 -> playerl("Can I see it?").also { stage++ }
            22 -> npcl("There is not much left to it, to be honest. The blade has almost compeltely rusted away, and the sapphires on the hilt were either stolen or were washed away by the river before it was found.").also { stage++ }
            23 -> npcl("I doubt it is useful to Blasidar in this state, master sculptor though he is.").also { stage++ }
            24 -> playerl("Are you sure this is the real axe then?").also { stage++ }
            25 -> npcl("Not entirely, no, but it matches the description well enough, and the holes for the sapphires are still clearly visible on the hilt. But since no one has a similar claim, I don't really care. It's genuine to me.").also { stage++ }
            26 -> options("This is tedious, I've lost interest.", "Perhaps I can repair the axe?").also { stage++ }
            27 -> when(buttonID) {
                1 -> playerl("This is tedious, I've lost interest.").also { stage = 28 }
                2 -> playerl("Perhaps I can repair the axe?").also { stage = 29 }
            }
            28 -> npcl("I'll get back to work then.").also { stage = END_DIALOGUE }
            29 -> npcl("On your own? I doubt it. The sapphires, perhaps, if you are a skilled enough crafter. But the blade... Clearly you are a master smith, perhaps one of the best human smiths in all of Gielinor. Yet this is beyond even you. What you need is the skills of an Imcando dwarf... but they must all be dead by now. ").also { stage++ }
            30 -> playerl("Oh, I know where the find an Imcando dwarf!").also { stage++ }
            31 -> playerl("He actually made a sword for me a while ago. I'm sure I can get him to help me again.").also { stage++ }
            32 -> npcl("Really? That is amazing news.").also { stage++ }
            33 -> playerl("He lives on a cliff at the very south end of Asgarnia, just south of Port Sarim. I can visit him again if you like.").also { stage++ }
            34 -> npcl("Excellent! You can take a cart to Ice Mountain from the station here, that should help you get there faster.").also { stage++ }
            36 -> npcl("I will entrust you with King Alvis' battleaxe then, human.").also { stage++ }
            37 -> npcl("Help to restore it to its former glory!").also { stage++ }
            38 -> npcl("And please ask Blasidar to return it to me after he's done with it, I would sure love to see the restored blade again.").also { stage++ }
            39 -> playerl("Thank you. I will not disappoint you.").also { stage = END_DIALOGUE }
        }
    }
}
//Speaking to Santiri for the first if The Knight's Sword quest was not completed beforehand and you have 99 smithing//

class SantiriDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl("Welcome, human, to the Quality Weapons Shop! Can I interest you in a purchase?").also { stage++ }
            1 -> options("Yes, I'm looking for some weapons.", "Yes, I'm looking for a particular battleaxe.", "No thanks.").also { stage++ }
            2 -> when(buttonID) {
                1 -> playerl("Yes, I'm looking for some weapons.").also { npc.openShop(player) }
                2 -> playerl("Yes, I'm looking for a particular battleaxe.").also { stage = 3 }
                3 -> playerl("No thanks.").also { stage = END_DIALOGUE }
            }
            3 -> npcl(FacialExpression.OLD_DEFAULT, "Fancy a particular colour then? Blue is quite popular at the moment, and red is on the rise.").also { stage++ }
            4 -> playerl("No, actually, I'm looking for King Alvis' axe.").also { stage++ }
            5 -> npcl("The King's axe!").also { stage++ }
            6 -> npcl("What would a human want with it?").also { stage++ }
            7 -> playerl("I've been tasked by Veldaban, Commander of the Black Guard in Keldagrim, to assist in every way possible with the rebuilding of King Alvis' statue.").also { stage++ }
            8 -> npcl("Oh yes, the statue... a most unfortunate incident.").also { stage++ }
            9 -> npcl("Not that I'm entirely sure that it was merely an accident, of course.").also { stage++ }
            10 -> playerl("How do you mean?").also { stage++ }
            11 -> npcl("I'm not entirely sure what I mean, human. But the axe, you say, what exactly did you need it for?").also { stage++ }
            12 -> options("Just give me the axe already, I know you have it!", "Blasidar the sculptor needs it for his statue.", "I don't really care for it after all.").also { stage++ }
            13 -> when(buttonID) {
                1 -> playerl("Just give me the axe already, I know you have it!").also { stage = 15 }
                2 -> playerl("Blasidar the sculptor needs it for his statue.").also { stage = 17 }
                3 -> playerl("I don't really care for it after all.").also { stage = 14 }
            }
            14 -> npcl(FacialExpression.OLD_DEFAULT, "Then stop wasting my time.").also { stage = END_DIALOGUE }
            15 -> npcl(FacialExpression.OLD_DEFAULT, "I'll give it to you, embedded into your head!").also { stage++ }
            16 -> playerl("I've had just about enough of this! Goodbye!").also { stage = END_DIALOGUE }
            17 -> npcl(FacialExpression.OLD_DEFAULT, "And so it does!").also { stage++ }
            18 -> npcl("It's been in my family's care for a few generations now, after it has been lost for a long time.").also { stage++ }
            19 -> playerl("What happened to it?").also { stage++ }
            20 -> npcl("I do not know how it got lost, but my great-grandfather found it at the banks of the Kelda, further downstream from the city.").also { stage++ }
            21 -> playerl("Can I see it?").also { stage++ }
            22 -> npcl("There is not much left to it, to be honest. The blade has almost compeltely rusted away, and the sapphires on the hilt were either stolen or were washed away by the river before it was found.").also { stage++ }
            23 -> npcl("I doubt it is useful to Blasidar in this state, master sculptor though he is.").also { stage++ }
            24 -> playerl("Are you sure this is the real axe then?").also { stage++ }
            25 -> npcl("Not entirely, no, but it matches the description well enough, and the holes for the sapphires are still clearly visible on the hilt. But since no one has a similar claim, I don't really care. It's genuine to me.").also { stage++ }
            26 -> options("This is tedious, I've lost interest.", "Perhaps I can repair the axe?").also { stage++ }
            27 -> when(buttonID) {
                1 -> playerl("This is tedious, I've lost interest.").also { stage = 28 }
                2 -> playerl("Perhaps I can repair the axe?").also { stage = 29 }
            }
            28 -> npcl("I'll get back to work then.").also { stage = END_DIALOGUE }
            29 -> npcl("On your own? I doubt it. The sapphires, perhaps, if you are a skilled enough crafter. But the blade... Clearly you are a master smith, perhaps one of the best human smiths in all of Gielinor. Yet this is beyond even you. What you need is the skills of an Imcando dwarf... but they must all be dead by now. ").also { stage++ }
            30 -> playerl("Oh, I know where the find an Imcando dwarf!").also { stage++ }
            31 -> npcl("Yes, perhaps, perhaps... Perhaps the librarian, just due east of here, can help you. Yes, I like the sound of this! I will entrust you with King Alvis' battleaxe, then, human. Help to restore it to its former glory! And please ask Blasidar to return it to me after he's done with it, I would sure love to see the restored blade again.").also { stage++ }
            32 -> playerl("Thank you. I will not disappoint you.").also { stage = END_DIALOGUE }
        }
    }
}

//Speaking to Santiri after he gives you the battleaxe//

class SantiriDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl("Welcome, human, to the Quality Weapons Shop! Can I interest you in a purchase?").also { stage++ }
            1 -> options("Yes, I'm looking for some weapons.", "Yes, I'm looking for a particular battleaxe.", "No thanks.").also { stage++ }
            2 -> when(buttonID) {
                1 -> playerl("Yes, I'm looking for some weapons.").also { npc.openShop(player) }
                2 -> playerl("Yes, I'm looking for a particular battleaxe.").also { stage = 3 }
                3 -> playerl("No thanks.").also { stage = END_DIALOGUE }
            }
            3 -> npcl(FacialExpression.OLD_DEFAULT, "Ah, you mean King Alvis' axe? You still have it, yes?").also { stage++ }
            4 -> playerl("Yes, I was just wondering what I should be doing with this piece of junk.").also { stage++ }
            5 -> npcl("Piece of junk??").also { stage++ }
            6 -> npcl("I thought you were going to put sapphires on it and bring it to an Imcando dwarf?").also { stage++ }
            7 -> playerl("Oh yes, of course, that's what I was going to do!").also { stage = END_DIALOGUE }
        }
    }
}
//Showing the repaired, sapphire-less axe to Santari//

class SantiriDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl("Welcome, human, to the Quality Weapons Shop! Can I interest you in a purchase?").also { stage++ }
            1 -> options("Yes, I'm looking for some weapons.", "Yes, I'm looking for a particular battleaxe.", "No thanks.").also { stage++ }
            2 -> when(buttonID) {
                1 -> playerl("Yes, I'm looking for some weapons.").also { npc.openShop(player) }
                2 -> playerl("Yes, I'm looking for a particular battleaxe.").also { stage = 3 }
                3 -> playerl("No thanks.").also { stage = END_DIALOGUE }
            }
            3 -> npcl(FacialExpression.OLD_DEFAULT, "Ah, you mean King Alvis' axe? You still have it, yes?").also { stage++ }
            4 -> playerl("Yes, and I got Thurgo the Imcando dwarf to fix it up nice and proper! Look!").also { stage++ }
            5 -> npcl("h, that's beautiful! All it needs now is three sapphires crafted onto the hilt.").also { stage = END_DIALOGUE }
        }
    }
}
//Talking to Santiri again after losing/dropping the axe before it's repaired//

class SantiriDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl("Welcome, human, to the Quality Weapons Shop! Can I interest you in a purchase?").also { stage++ }
            1 -> options("Yes, I'm looking for some weapons.", "Yes, I'm looking for a particular battleaxe.", "No thanks.").also { stage++ }
            2 -> when(buttonID) {
                1 -> playerl("Yes, I'm looking for some weapons.").also { npc.openShop(player) }
                2 -> playerl("Yes, I'm looking for a particular battleaxe.").also { stage = 3 }
                3 -> playerl("No thanks.").also { stage = END_DIALOGUE }
            }
            3 -> npcl(FacialExpression.OLD_DEFAULT, "Ah, you mean King Alvis' axe? You still have it, yes?").also { stage++ }
            4 -> playerl("I... sort of... ehm... Look, I lost it!").also { stage++ }
            5 -> npcl("At least you are honest; human. I found it, actually, after you lost it. I'm not happy with giving it to you again, but the rebuilding of the statue is more important. Be careful with it this time, alright?").also { stage = END_DIALOGUE }
        }
    }
}
//Talking to Santari again, after repairing the axe, but losing it//

class SantiriDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl("Welcome, human, to the Quality Weapons Shop! Can I interest you in a purchase?").also { stage++ }
            1 -> options("Yes, I'm looking for some weapons.", "Yes, I'm looking for a particular battleaxe.", "No thanks.").also { stage++ }
            2 -> when(buttonID) {
                1 -> playerl("Yes, I'm looking for some weapons.").also { npc.openShop(player) }
                2 -> playerl("Yes, I'm looking for a particular battleaxe.").also { stage = 3 }
                3 -> playerl("No thanks.").also { stage = END_DIALOGUE }
            }
            3 -> npcl(FacialExpression.OLD_DEFAULT, "Ah, you mean King Alvis' axe? You still have it, yes?").also { stage++ }
            4 -> playerl("Er, well... I had it repaired by and Imcando dwarf, but...").also { stage++ }
            5 -> npcl("Yes, $player.name}?").also { stage++ }
            6 -> playerl("I lost it! I don't remember where I put it!")
            7 -> npcl("Then you'd better go back to your Imcando dwarf and find out!").also { stage = END_DIALOGUE }
        }
    }
}
//Using an uncut sapphire on the battleaxe, text prints over chat box//
This sapphire must be cut before it's the right shape to be crafted onto the hilt.

//Using a cut sapphire on the battleaxe without having enough in inventory, text prints over chat box//
You need three sapphires to properly do this job.
Perhaps you should run to the bank to get some more?

//When trying to wield the worn Dwarven battleaxe//

class BattleaxeDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> playerl("I should be very careful with this battleaxe, it's almost a museum piece! I don't want to damage it by wielding it.").also { stage = END_DIALOGUE }
                )
        }
    }
}
//Attempting to drop an axe, then get another and picking it back, printed over the chat box.//
You already have King Alvis' axe. You're not sure what that axe is for, but you don't need it.


//When trying to wield the restored Dwarven battleaxe//
class BattleaxeDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> playerl("I went through all this trouble to restore this axe, I'm not going to ruin it now by wielding it and accidentally smashing it to pieces. I'd better take it to the sculptor.").also { stage = END_DIALOGUE }
        }
    }
}
//When adding sapphire to the axe before Thurgo sharpens it. https://youtu.be/UwqMFs3MDMM?t=156//
//Displays in chat box as regular text//
"You take three of your cut saphirres and start to work..."
"Great, all it needs now is a little sharpening!"

//When adding sapphire to the axe after Thurgo sharpens it.//
//Displays in chat box as regular text//
"You have restored the axe to its former glory!"

//Talking to the dwarven librarian because you didn't do knight's quest//

class LibrarianDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl(FacialExpression.OLD_DEFAULT, "Welcome to the Keldagrim library, human traveller").also { stage++ }
            1 -> options("Can you tell me more about the library?", "Can you help me find an Imcando dwarf?").also { stage++ }
            2 -> when(buttonID) {
                1 -> playerl("Can you tell me more about the library?").also { stage = 3 }
                2 -> playerl("Can you help me find an Imcando dwarf?").also { stage = 4 }
                3 -> npcl(FacialExpression.OLD_DEFAULT, "This is Keldagrim's finest library. Feel free to look have a look around.").also { stage = END_DIALOGUE }
                4 -> npcl(FacialExpression.OLD_DEFAULT, "An Imcando dwarf, you say?").also { stage++ }
                5 -> playerl("Yes, I need the help of an Imcando dwarf to repair an ancient battle axe.").also { stage++ }
                6 -> npcl("I see, I see.").also { stage++ }
                7 -> npcl("Ah, I'm afraid I can't help you here, Keldagrim lost contact with that particular tribe of dwarves a long time ago.").also { stage++ }
                8 -> playerl("Is there no one else who can help me?").also { stage++ }
                9 -> npcl("I suppose you could try Reldo, in the palace of Varrock. He is a most capable human librarian and knows quite a bit about us dwarves.").also { stage++ }
                10 -> playerl("Do you think he can help me?").also { stage++ }
                11 -> npcl(FacialExpression.OLD_DEFAULT, "He lives quite a good deal closer to where the Imcando used to live than we do, so it is not unlikely. Tell him Hugi the librarian sent you and I'm sure he'll be happy to help.").also { stage++ }
                12 -> npcl(FacialExpression.OLD_DEFAULT, "And take a cart to Ice Mountain from the station in the east side of the city. It'll help you get to Varrock faster.").also { stage = END_DIALOGUE }
            }
        }
    }
}
//Talking to Reldo after talking to the dwarven librarian//

class ReldoDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> options("Ask about Imcando dwarves?", "Talk about something else").also { stage++ }
            1 -> when(buttonID) {
                1 -> playerl("I've come from Hugi, he suggested that I speak to you.").also { stage = 2 }
                2 -> playerl("Talk about something else").also { stage = ?????? }
                2 -> npcl(FacialExpression.OLD_DEFAULT, "Hugi? I haven't seen him for a long time! He's still in Keldagrim, is he?").also { stage++ }
                3 -> npcl(FacialExpression.OLD_DEFAULT, "Perhaps I should go there again some day, now that humans are allowed in again.").also { stage++ }
                4 -> playerl("I've come to ask you about the Imcando dwarves. Hugi says you might know something about them.").also { stage++ }
                5 -> npcl("The Imcando dwarves, you say?").also { stage++ }
                6 -> npcl("Ah yes... the master smiths among the dwarves. They used secret smithing knowledge passed down from generation to generation.").also { stage++ }
                7 -> npcl("Unfortunately, about a century ago, the once thriving race was wiped out during the barbarian invasions of that time.").also { stage++ }
                8 -> playerl("So are there any Imcando left at all?").also { stage++ }
                9 -> npcl(FacialExpression.OLD_DEFAULT, "I velieve a few of them survived, yes. But with the bulk of their population destroyed their numbers must have dwindled even further.").also { stage++ }
                10 -> npcl(FacialExpression.OLD_DEFAULT, "I believe I remember there are a couple living near the cliffs on the Asgarnian southern penisula but they DO tend to keep to themselves.").also { stage++ }
                11 -> npcl(FacialExpression.OLD_DEFAULT, "They tend not to tell people that they're the descendants of the Imcando, which is why people think that the tribe has died out totally, but you may well have more luck talking to them if you them some").also { stage++ }
                12 -> npcl(FacialExpression.OLD_DEFAULT, "redberry pie. They REALLY like redberry pie.").also { stage = END_DIALOGUE }
            }
        }
    }
}
//Ask Thurgo about the ancient axe, without completing Knight's Sword, and no Reldo//

class ThurgoDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> playerl("Hello. Are you an Imcando dwarf?").also { stage++ }
            1 -> npcl(FacialExpression.OLD_DEFAULT, "Maybe. Who wants to know?").also { stage++ }
            2 -> playerl("Can you help me with this ancient axe?").also { stage++ }
            3 -> npcl(FacialExpression.OLD_DEFAULT, "No. I don't do that anymore. I'm getting old.").also { stage = END_DIALOGUE }
        }
    }
}
//Ask Thurgo about the ancient axe without the ax//

class ThurgoDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> playerl("Hello. Are you an Imcando dwarf? ").also { stage++ }
            1 -> npcl(FacialExpression.OLD_DEFAULT, "Maybe. Who wants to know?").also { stage++ }
            2 -> playerl("Can you help me with this ancient axe? ").also { stage++ }
            3 -> npcl(FacialExpression.OLD_DEFAULT, "What axe?").also { stage++ }
            4 -> playerl("Err, never mind.").also { stage = END_DIALOGUE }
        }
    }
}
//Ask Thurgo about the ancient axe, without Knight's Sword, after Reldo//
class ThurgoDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> playerl("Hello. Are you an Imcando dwarf? ").also { stage++ }
            1 -> npcl(FacialExpression.OLD_DEFAULT, "Maybe. Who wants to know?").also { stage++ }
            2 -> options("Would you like some redberry pie?", "Can you make me a special sword?").also { stage++ }
            3 -> when(buttonID) {
                1 -> playerl("Would you like some redberry pie?").also { stage = 4 }
                2 -> playerl("Can you make me a special sword?").also { stage = 6 }
            }
            4 -> npcl(FacialExpression.OLD_DEFAULT, "I'd never say no to a redberry pie! They're GREAT stuff!").also { stage++ }
            5 -> npcl(FacialExpression.OLD_DEFAULT, "By Guthix! THAT was a good pie! Anyone who makes pie like THAT has got to be alright!").also { stage = END_DIALOGUE }
            6 -> npcl(FacialExpression.OLD_DEFAULT, "No. I don't do that anymore. I'm getting old.").also { stage = END_DIALOGUE }
        }
    }
}
//Speaking to Thurgo about the battleaxe repair after completing the knights sword and you already have sapphires in the hilt//

class ThurgoDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> options("Skillcape of Smithing", "Something else.").also { stage++ }
            1 -> when(buttonID) {
                1 -> playerl("Skillcape of Smithing").also { ?????? }
                2 -> playerl("Something else.").also { stage = 2 }
            }
            2 -> options("Would you like some redberry pie?", "About that sword...", "Can you help me with this ancient axe?").also { stage++ }
            3 -> when(buttonID) {
                1 -> playerl("Would you like some redberry pie?").also { ?????? }
                2 -> playerl("About that sword...").also { ?????? }
                3 -> playerl("Can you help me with this ancient axe?").also { stage = 4 }
            }
            4 -> npcl(FacialExpression.OLD_DEFAULT, "You make excellent redberry pies, ${player.name}, so how can I refuse?").also { stage++ }
            5 -> npcl(FacialExpression.OLD_DEFAULT, "Let me see what's wrong with it then.").also { stage++ }
            6 -> playerl("Here... the blade of this axe has become extremely dull and brittle. I need it restored to its former glory.").also { stage++ }
            7 -> npcl("Its former glory eh? May I ask where exactly you got this axe from?").also { stage++ }
            8 -> playerl("It was given to me by someone in Keldagrim. I prefer not to say any more than that.").also { stage++ }
            9 -> npcl(FacialExpression.OLD_DEFAULT, "Ah, Keldagrim. We have not been there for a long time.").also { stage++ }
            10 -> playerl("We?").also { stage++ }
            11 -> npcl("Never mind.").also { stage++ }
            12 -> npcl(FacialExpression.OLD_DEFAULT, "Hand me the axe and I'll fix it right up for you.").also { stage++ }
            13 -> playerl("You don't want any blurite this time?").also { stage++ }
            14 -> npcl(FacialExpression.OLD_DEFAULT, "Oh no, blurite is not appropiate here. No no, this is going to be a very delicate piece of work, requiring only a small amount in the way of raw materials.").also { stage++ }
            15 -> npcl(FacialExpression.OLD_DEFAULT, "Can you get me one bar of iron? Then I'll be able to start my work on this.").also { stage++ }
            16 -> playerl("I've got one right here.").also { stage++ }
            17 -> npcl(FacialExpression.OLD_DEFAULT, "Good, good. Hand me the axe and I'll get to work.").also { stage++ }
            18 -> npcl(FacialExpression.OLD_DEFAULT, "(Here's your axe, ${player.name}, good as new.").also { stage++ }
            19 -> playerl("Thanks for your help Thrugo!").also { stage++ }
            20 -> options("You have restored the axe to its former glory! You should return to Blasidar in Keldagrim now, do you wish to return at once?").also { stage++ }
            21 -> when(buttonID) {
                1 -> playerl("Return to Keldagrim immediately.").also { stage = END_DIALOGUE }
                2 -> playerl("Explore the area before returning.").also { stage = END_DIALOGUE }
            }
        }
    }
}
//Speaking to Thurgo about the battleaxe repair after completing the knights sword and you have no sapphires in the hilt//

class ThurgoDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> options("Skillcape of Smithing", "Something else.").also { stage++ }
            1 -> when(buttonID) {
                1 -> playerl("Skillcape of Smithing").also { ?????? }
                2 -> playerl("Something else.").also { stage = 2 }
            }
            2 -> options("Would you like some redberry pie?", "About that sword...", "Can you help me with this ancient axe?").also { stage++ }
            3 -> when(buttonID) {
                1 -> playerl("Would you like some redberry pie?").also { ?????? }
                2 -> playerl("About that sword...").also { ?????? }
                3 -> playerl("Can you help me with this ancient axe?").also { stage = 4 }
            }
            4 -> npcl(FacialExpression.OLD_DEFAULT, "You make excellent redberry pies, ${player.name}, so how can I refuse?").also { stage++ }
            5 -> npcl(FacialExpression.OLD_DEFAULT, "Let me see what's wrong with it then.").also { stage++ }
            6 -> playerl("Here... the blade of this axe has become extremely dull and brittle. I need it restored to its former glory.").also { stage++ }
            7 -> npcl("Its former glory eh? May I ask where exactly you got this axe from?").also { stage++ }
            8 -> playerl("It was given to me by someone in Keldagrim. I prefer not to say any more than that.").also { stage++ }
            9 -> npcl(FacialExpression.OLD_DEFAULT, "Ah, Keldagrim. We have not been there for a long time.").also { stage++ }
            10 -> playerl("We?").also { stage++ }
            11 -> npcl("Never mind.").also { stage++ }
            12 -> npcl(FacialExpression.OLD_DEFAULT, "Hand me the axe and I'll fix it right up for you.").also { stage++ }
            13 -> playerl("You don't want any blurite this time?").also { stage++ }
            14 -> npcl(FacialExpression.OLD_DEFAULT, "Oh no, blurite is not appropiate here. No no, this is going to be a very delicate piece of work, requiring only a small amount in the way of raw materials.").also { stage++ }
            15 -> npcl(FacialExpression.OLD_DEFAULT, "Can you get me one bar of iron? Then I'll be able to start my work on this.").also { stage++ }
            16 -> playerl("I've got one right here.").also { stage++ }
            17 -> npcl(FacialExpression.OLD_DEFAULT, "Good, good. Hand me the axe and I'll get to work.").also { stage++ }
            18 -> npcl(FacialExpression.OLD_DEFAULT, "(Here's your axe, ${player.name}. It looks like there's some damage to the hilt as well, probably some sapphires that are missing. But I'm sure you can take care of that little problem yourself.").also { stage++ }
            19 -> playerl("Thanks for your help Thrugo!").also { stage++ }
            20 -> options("You are well on your way to restoring the axe. Do you wish to return to Keldgrim now?").also { stage++ }
            21 -> when(buttonID) {
                1 -> playerl("Return to Keldagrim immediately.").also { stage = END_DIALOGUE }
                2 -> playerl("Explore the area before returning.").also { stage = END_DIALOGUE }
            }
        }
    }
}
//Speaking to Thurgo about the battleaxe repair after completing the knights sword but you do not have an iron bar on you//

class ThurgoDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> options("Skillcape of Smithing", "Something else.").also { stage++ }
            1 -> when(buttonID) {
                1 -> playerl("Skillcape of Smithing").also { ?????? }
                2 -> playerl("Something else.").also { stage = 2 }
            }
            2 -> options("Would you like some redberry pie?", "About that sword...", "Can you help me with this ancient axe?").also { stage++ }
            3 -> when(buttonID) {
                1 -> playerl("Would you like some redberry pie?").also { ?????? }
                2 -> playerl("About that sword...").also { ?????? }
                3 -> playerl("Can you help me with this ancient axe?").also { stage = 4 }
            }
            4 -> npcl(FacialExpression.OLD_DEFAULT, "You make excellent redberry pies, ${player.name}, so how can I refuse?").also { stage++ }
            5 -> npcl(FacialExpression.OLD_DEFAULT, "Let me see what's wrong with it then.").also { stage++ }
            6 -> playerl("Here... the blade of this axe has become extremely dull and brittle. I need it restored to its former glory.").also { stage++ }
            7 -> npcl("Its former glory eh? May I ask where exactly you got this axe from?").also { stage++ }
            8 -> playerl("It was given to me by someone in Keldagrim. I prefer not to say any more than that.").also { stage++ }
            9 -> npcl(FacialExpression.OLD_DEFAULT, "Ah, Keldagrim. We have not been there for a long time.").also { stage++ }
            10 -> playerl("We?").also { stage++ }
            11 -> npcl("Never mind.").also { stage++ }
            12 -> npcl(FacialExpression.OLD_DEFAULT, "Hand me the axe and I'll fix it right up for you.").also { stage++ }
            13 -> playerl("You don't want any blurite this time?").also { stage++ }
            14 -> npcl(FacialExpression.OLD_DEFAULT, "Oh no, blurite is not appropiate here. No no, this is going to be a very delicate piece of work, requiring only a small amount in the way of raw materials.").also { stage++ }
            15 -> npcl(FacialExpression.OLD_DEFAULT, "Can you get me one bar of iron? Then I'll be able to start my work on this.").also { stage++ }
            16 -> playerl("I'll go get one.").also { stage = END_DIALOGUE }
        }
    }
}
//Thrugos dialogue if you lose the axe and need to get it back from him.//

class ThurgoDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> options("Skillcape of Smithing", "Something else.").also { stage++ }
            1 -> when(buttonID) {
                1 -> playerl("Skillcape of Smithing").also { ?????? }
                2 -> playerl("Something else.").also { stage = 2 }
            }
            2 -> playerl("Err, Thurgo..?").also { stage++ }
            4 -> npcl(FacialExpression.OLD_DEFAULT, "Yes, ${player.name}?").also { stage++ }
            5 -> playerl("I've lost that axe you repaired for me. Have you seen it anywhere?").also { stage++ }
            6 -> npcl("I did find something washed up on the beach, I think it might be the axe I repaired for you, yes.").also { stage++ }
            7 -> npcl("Thanks!").also { stage = END_DIALOGUE }
        }
    }
}
//Speaking to Santiri after finishing restoring the axe//

class SantiriDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl("Welcome, human, to the Quality Weapons Shop! Can I interest you in a purchase?").also { stage++ }
            1 -> options("Yes, I'm looking for some weapons.", "Yes, I'm looking for a particular battleaxe.", "No thanks.").also { stage++ }
            2 -> when(buttonID) {
                1 -> playerl("Yes, I'm looking for some weapons.").also { npc.openShop(player) }
                2 -> playerl("Yes, I'm looking for a particular battleaxe.").also { stage = 3 }
                3 -> playerl("No thanks.").also { stage = END_DIALOGUE }
            }
            3 -> npcl(FacialExpression.OLD_DEFAULT, "Ah, you mean King Alvis' axe? You still have it, yes?").also { stage++ }
            4 -> playerl("Yes, and look, it's all fixed up now! I got Thurgo the Imcando dwarf to fix the blade, and I've crafted three sapphires onto the hilt.").also { stage++ }
            5 -> npcl("That is amazing! Absolutely astounding work!").also { stage++ }
            6 -> npcl("Go and give Blasidar a hand with it then, and make sure to tell him to send it back to me when he's done with it!").also { stage = END_DIALOGUE }
        }
    }
}
//Giving pieces to Riki the sculptor's model//
//The axe//

class RikiDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> playerl("I have this battleaxe for you.").also { stage++ }
            1 -> npcl(FacialExpression.OLD_DEFAULT, "Thank... you.").also { stage = END_DIALOGUE }
        }
    }
}
//Giving the boots to Riki the sculptor's model//

class RikiDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> playerl("Here, I have these boots for you to wear.").also { stage++ }
            1 -> npcl(FacialExpression.OLD_DEFAULT, "Thank... you.").also { stage = END_DIALOGUE }
        }
    }
}
//Giving the exquisite clothes to Riki the sculptor's model//

class RikiDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> playerl("I have some clothes for you to wear.").also { stage++ }
            1 -> npcl(FacialExpression.OLD_DEFAULT, "Thank... you.").also { stage = END_DIALOGUE }
        }
    }
}
//Talking to Riki the sculptor's model after he has all the peices and before the consortium agreement//

class RikiDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> playerl("Hey, you're looking nice in that outfit!").also { stage++ }
            1 -> npcl(FacialExpression.OLD_DEFAULT, "Yes... I do.").also { stage++ }
            2 -> playerl("So is the job done now?").also { stage++ }
            3 -> playerl("Hello?").also { stage++ }
            4 -> npcl(FacialExpression.OLD_DEFAULT, "No... it isn't").also { stage++ }
            5 -> playerl("Care to tell me why not?").also { stage++ }
            6 -> npcl(FacialExpression.OLD_DEFAULT, "Talk... to Blasidar").also { stage++ }
            7 -> playerl("It's very tiring trying to talk to you, you know?").also { stage = END_DIALOGUE }
        }
    }
}
//Talking to Saro for the first time//

class SaroDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl(FacialExpression.OLD_DEFAULT, "Welcome to my store, human! Are you interested in buying anything?").also { stage++ }
            1 -> options("Yes, I'm looking for some armour.", "Yes, I'm looking for a pair of special boots.", "No thanks.").also { stage++ }
            2 -> when(buttonID) {
                1 -> playerl("Yes, I'm looking for some armour.").also { npc.openShop(player) }
                2 -> playerl("Yes, I'm looking for a pair of special boots.").also { stage = 3 }
                3 -> playerl("No thanks.").also { stage = END_DIALOGUE }
            }
            3 -> npcl(FacialExpression.OLD_DEFAULT, "Boots, you say? What kind of boots?").also { stage++ }
            4 -> playerl("The best boots you have! Boots fit for a king!").also { stage++ }
            5 -> npcl("Hmm, let's see... Well, I've got this pair of very exclusive boots. They're not armoured, but they look nice.").also { stage++ }
            6 -> npcl("Or rather, I had. I'm afraid I sold them, come to think of it.").also { stage++ }
            7 -> playerl("And you don't have anything else?").also { stage++ }
            8 -> npcl(FacialExpression.OLD_DEFAULT, "I don't normally stock boots, no, nothing that's appropiate for... what did you say? A king?").also { stage++ }
            9 -> playerl("Please, tell me! Who did you sell the boots to?").also { stage++ }
            10 -> npcl("Old chap here in the west part of town, his name is Dromund. He's quite well known, not only for his wealth, but also for his... pecularities.").also { stage++ }
            11 -> playerl("What house does he live in?").also { stage++ }
            12 -> npcl(FacialExpression.OLD_DEFAULT, "Go out the door, and head north. You'll have the headquarters of the Black Guard on your left and the bank on your right. Keep heading north and you'll find Dromund's house on your right. Can't miss it!").also { stage++ }
            13 -> npcl("And if you're going to try to get the boots off him, good luck. You'll need it.").also { stage++ }
            14 -> playerl("Thanks!").also { stage = END_DIALOGUE }
        }
    }
}
//Talking to Dromund for the first time//

class DromundDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl(FacialExpression.OLD_DEFAULT, "You're trespassing, get out!").also { stage++ }
            1 -> playerl("Calm down! I just want to ask yo ua few questions.").also { stage++ }
            2 -> npcl(FacialExpression.OLD_DEFAULT, "Are you with the Black Guard or something?").also { stage++ }
            3 -> npcl(FacialExpression.OLD_DEFAULT, "No, you wouldn't be, you're just a human.").also { stage++ }
            4 -> npcl("What do you want from me?").also { stage++ }
            5 -> playerl("I went to the Quality Armour shop. The proprietor told me you have just recently purchased a pair of boots from him.").also { stage++ }
            6 -> npcl("Right, and nice they look too on my display tables.").also { stage++ }
            7 -> playerl("You're not actually using them then? Might I be able to buy them off you?").also { stage++ }
            8 -> npcl(FacialExpression.OLD_DEFAULT, "Good one, human!").also { stage++ }
            9 -> npcl(FacialExpression.OLD_DEFAULT, "They're mine and the last thing I'll do is part with them!").also { stage = END_DIALOGUE }
        }
    }
}
//Talking to Dromund again//

class DromundDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> playerl("Are you sure you don't want to give me those boots?").also { stage++ }
            1 -> npcl(FacialExpression.OLD_DEFAULT, "Get out of here before I get one of my servants to throw you out!").also { stage = END_DIALOGUE }
        }
    }
}
//Attempting to telegrab the right boot while inside the house//

class DromundDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl(FacialExpression.OLD_DEFAULT, "What are you doing, casting spells in my house? Get out!").also { stage = END_DIALOGUE }
        }
    }
}
//trying to take right boot, the cat growls at you. I don't know how to handle more than 1 npc talking.//

class DromundsCatDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl(FacialExpression.OLD_DEFAULT, "Growl!").also { stage++ }
                class DromundDialogue : DialogueFile() {
            override fun handle(componentID: Int, buttonID: Int) {
                when(stage)
                1 -> npcl(FacialExpression.OLD_DEFAULT, "Stay away from there! Who do you think you are, coming into my house like that?").also { stage++ }
//this line is just a text pop up that covers chat//
                2 -> playerl("You don't think you'll be able to get close to this boot without the old dwarf noticing you, what with his cat guarding.").also { stage = END_DIALOGUE }
            }
        }
        }
    }
}
//Attempting to steal a duplicate of any boot, this line is just a text pop up that covers chat//
That looks like a different boot than you need. Besides, you already have one that looks similar.

//Attempting to wear any one boot, this line is just a text pop up that covers chat//
What, wear just one boot? Besides, the boot is too precious for that.

//Attempting to wear the pair of boots, this line is just a text pop up that covers chat
I shouldn't wear these boots, I don't want anything to happen to them before I bring them to the sculptor.

//Trying to take the left boot while Dromund can see you.//

class DromundDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl(FacialExpression.OLD_DEFAULT, "What are you doing?!").also { stage = END_DIALOGUE }
        }
    }
}
//*Talking to Dromund after stealing both boots//

class DromundDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl(FacialExpression.OLD_DEFAULT, "Someone stole my beautiful boots... I had to buy some crummy replicas, the real boots were one of a kind.").also { stage++ }
            1 -> playerl("Don't worry, if I find out who did it I'll take care of them.").also { stage = END_DIALOGUE }
        }
    }
}
//If you drop the boots, this line is just a text pop up that covers chat//
You drop one boot, but then the other shoe falls... you've lost them both!

//Talk to the cat with catspeak ammy on//

class DromundsCatDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl(FacialExpression.OLD_DEFAULT, "What do you want?").also { stage++ }
            1 -> playerl("I didn't know dwarves kept cats.").also { stage++ }
            2 -> npcl(FacialExpression.OLD_DEFAULT, "Why wouldn't they?").also { stage++ }
            3 -> npcl(FacialExpression.OLD_DEFAULT, "A friend of mine lives at the palace, actually. Well, I say friend - used to be a friend.").also { stage++ }
            4 -> playerl("What happened?").also { stage++ }
            5 -> npcl(FacialExpression.OLD_DEFAULT, "He got adopted by Hreidmar, the director of the Red Axe.").also { stage++ }
            6 -> playerl("Oh?").also { stage++ }
            7 -> npcl(FacialExpression.OLD_DEFAULT, "I don't like the Red Axe! They stomp around everywhere. You've got to be careful of your tail with those people around.").also { stage = END_DIALOGUE }
        }
    }
}
//this next line is just a text pop up that covers chat when you try to take Right boot through the window near it//
You try to reach for the boot through the window, but it's too far away on the table.

//Trying to telegrab the right boot while Dromund can see you.//

class DromundDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl(FacialExpression.OLD_DEFAULT, "Hey! Is there someone at my window?").also { stage++ }
            1 -> npcl(FacialExpression.OLD_DEFAULT, "Scram before I get the Black Guard to arrest you!").also { stage = END_DIALOGUE }
        }
    }}
//When you get both boots this text pop up that covers chat//
You now have the perfect pair of boots to bring to the sculptor's model!

//When you talk to Vermundi the first time//

class VermundiDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl(FacialExpression.OLD_DEFAULT, "Welcome to my clothes stall, can I help you with anything?").also { stage++ }
            1 -> options("Yes, what clothes do you have in stock?", "Yes, I'm looking for some special clothes.", "No, I'm just browsing.").also { stage++ }
            2 -> when(buttonID) {
                1 -> playerl("Yes, what clothes do you have in stock?").also { npc.openShop(player) }
                2 -> playerl("Yes, I'm looking for some special clothes.").also { stage = 3 }
                3 -> playerl("No, I'm just browsing.").also { stage = END_DIALOGUE }
            }
            3 -> npcl(FacialExpression.OLD_DEFAULT, "Oh, that sounds interesting, what's this about?").also { stage++ }
            4 -> playerl("I'm helping the sculptor to rebuild the statue of King Alvis. But he wants to know what his clothes looked like.").also { stage++ }
            5 -> npcl(FacialExpression.OLD_DEFAULT, "Oh dear, that statue is in a terrible mess, isn't it?").also { stage++ }
            6 -> npcl(FacialExpression.OLD_DEFAULT, "I could hear the tumult from over here!").also { stage++ }
            7 -> playerl("But the clothes, do you have any similar clothes?").also { stage++ }
            8 -> npcl(FacialExpression.OLD_DEFAULT, "Oh no, no, I can't quite recall what the clothes looked like. But I know someone who can!").also { stage++ }
            9 -> playerl("Who's that?").also { stage++ }
            10 -> npcl(FacialExpression.OLD_DEFAULT, "Well I"m sure Hugi the librarian in the West can help you along.").also { stage++ }
                11 -> playerl("West?").also { stage++ }
            12 -> npcl(FacialExpression.OLD_DEFAULT, "Keldagrim-West, dear... on the other side of the Kelda, towards the north end of the city.").also { stage++ }
            13 -> npcl(FacialExpression.OLD_DEFAULT, "I'm sure he can show yo uthe exact designs of the clothes.").also { stage++ }
            14 -> playerl("But I need the actual clothes themselves, not just the designs.").also { stage++ }
            15 -> npcl(FacialExpression.OLD_DEFAULT, "Oh, just bring the designs to me then, I'll fix you up some nice clothes!").also { stage++ }
            16 -> npcl(FacialExpression.OLD_DEFAULT, "Sounds like a fun little thing to do!").also { stage++ }
            17 -> playerl("Great, thanks a lot, I'll check out the library!").also { stage = END_DIALOGUE }
        }
    }
}

//Talking to Vermundi before retrieving the clothes book.//

class VermundiDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl(FacialExpression.OLD_DEFAULT, "Welcome to my clothes stall, can I help you with anything?").also { stage++ }
            1 -> options("Yes, what clothes do you have in stock?", "Yes, about those clothes again...", "No, I'm just browsing.").also { stage++ }
            2 -> when(buttonID) {
                1 -> playerl("Yes, what clothes do you have in stock?").also { npc.openShop(player) }
                2 -> playerl("Yes, about those clothes again...").also { stage = 3 }
                3 -> playerl("No, I'm just browsing.").also { stage = END_DIALOGUE }
            }
            3 -> npcl(FacialExpression.OLD_DEFAULT, "Oh, yes, did you get those designs from the librarian?").also { stage++ }
            4 -> playerl("I haven't actually spoken to the librarian yet, let me do that now.").also { stage = END_DIALOGUE }
        }
    }
}
//Talking to the librarian about clothes//

class LibrarianDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl(FacialExpression.OLD_DEFAULT, "Welcome to the Keldagrim library, human traveller").also { stage++ }
            1 -> options("Can you tell me more about the library?", "Do you know anything about King Alvis' clothes?").also { stage++ }
            2 -> when(buttonID) {
                1 -> playerl("Can you tell me more about the library?").also { stage = 3 }
                2 -> playerl("Do you know anything about King Alvis' clothes?").also { stage = 4 }
                3 -> npcl(FacialExpression.OLD_DEFAULT, "This is Keldagrim's finest library. Feel free to look have a look around.").also { stage = END_DIALOGUE }
                4 -> npcl(FacialExpression.OLD_DEFAULT, "His clothes? How do you mean?").also { stage++ }
                5 -> playerl("I'm helping Blasidar the sculptor to rebuild the statue of King Alvis, but he needs to know the design of his clothes.").also { stage++ }
                6 -> npcl("I see, I see.").also { stage++ }
                7 -> npcl("There is a book, somewhere in the library, that may help you. It is the 'Scholars Guide to Dwarven Costumes' and it contains the designs of the costumes of a lot of old Kings and dwarven dignities.").also { stage++ }
                8 -> playerl("Sounds like just the thing. Where exactly could I find it?").also { stage++ }
                9 -> npcl("Let me think... I believe it is on the top shelf of one of the bookcases in the library, because it is such an old book.").also { stage++ }
                10 -> playerl("Can you be any more specific? Upstairs, downstairs?").also { stage++ }
                11 -> npcl(FacialExpression.OLD_DEFAULT, "I don't remember, sorry. You will have to try several bookcases. You will probably need the ladders, tall a human though you are.").also { stage++ }
                12 -> playerl("Well, thanks, I'll have a look.").also { stage = END_DIALOGUE }
            }
        }
    }
}
//Bookcase transcript//
//Looking at the incorrect bookcase prints this over chat//
You look through all the books but see nothing of particular interest to you.

//Searching the correct bookcase with over 30 kg prints this over chat//
As you put your foot on the bottom of the ladder, you hear it creak loudly... It nearly breaks! This ladder can't support your weight!

//Searching the correct bookcase, with the book in inventory prints this over chat//
You already have a copy of the 'Scholars Guide to Dwarven Costumes'. That's quite enough for you.

//Climbing the correct bookshelf with the ladder on the north end of the library prints this over chat//
You dust off the book you just retrieved and read the title: 'Scholars Guide to Dwarven Costumes'. Just what yo need! You can take this to the clothes stall in the palace market now.

//Talking to Vermundi after retrieving the clothes book.//

class VermundiDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl(FacialExpression.OLD_DEFAULT, "Welcome to my clothes stall, can I help you with anything?").also { stage++ }
            1 -> options("Yes, what clothes do you have in stock?", "Yes, about those clothes again...", "No, I'm just browsing.").also { stage++ }
            2 -> when(buttonID) {
                1 -> playerl("Yes, what clothes do you have in stock?").also { npc.openShop(player) }
                2 -> playerl("Yes, about those clothes again...").also { stage = 3 }
                3 -> playerl("No, I'm just browsing.").also { stage = END_DIALOGUE }
            }
            3 -> npcl(FacialExpression.OLD_DEFAULT, "Oh, yes, did you get those designs from the librarian?").also { stage++ }
            4 -> playerl("Yes, I have a book right here, have a look at it!").also { stage++ }
            5 -> npcl(FacialExpression.OLD_DEFAULT, "Oh, I see, I see!").also { stage++ }
            6 -> npcl(FacialExpression.OLD_DEFAULT, "I can definitely help you with this.").also { stage++ }
            7 -> npcl(FacialExpression.OLD_DEFAULT, "I only have one small problem, you see... I've run out of fuel for my spinning machine.").also { stage++ }
            8 -> playerl("What does it run on?").also { stage++ }
            9 -> npcl(FacialExpression.OLD_DEFAULT, "Steam, of course.").also { stage++ }
            10 -> npcl(FacialExpression.OLD_DEFAULT, "But I've used up all my coal and wood and I don't have the time to leave my stall to get them.").also { stage++ }
            11 -> playerl("Don't worry, I'll get them for you. Let's see... some coal and some logs. Shouldn't be too hard.").also { stage = END_DIALOGUE }
        }
    }
}
//Talking to Vermundi before fixing the spinning machine//

class VermundiDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl(FacialExpression.OLD_DEFAULT, "Welcome to my clothes stall, can I help you with anything?").also { stage++ }
            1 -> options("Yes, what clothes do you have in stock?", "Yes, about those clothes again...", "No, I'm just browsing.").also { stage++ }
            2 -> when(buttonID) {
                1 -> playerl("Yes, what clothes do you have in stock?").also { npc.openShop(player) }
                2 -> playerl("Yes, about those clothes again...").also { stage = 3 }
                3 -> playerl("No, I'm just browsing.").also { stage = END_DIALOGUE }
            }
            3 -> npcl(FacialExpression.OLD_DEFAULT, "Well, like I said, I can't do anything really without my spinning machine.").also { stage++ }
            4 -> playerl("Right, and what did you need again to start the engine?").also { stage++ }
            5 -> npcl(FacialExpression.OLD_DEFAULT, "Some coal and logs should do it!").also { stage = END_DIALOGUE }
        }
    }
}
//Talking to Vermundi before fixing the spinning machine with the coal and logs in inventory//

class VermundiDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl(FacialExpression.OLD_DEFAULT, "Welcome to my clothes stall, can I help you with anything?").also { stage++ }
            1 -> options("Yes, what clothes do you have in stock?", "Yes, about those clothes again...", "No, I'm just browsing.").also { stage++ }
            2 -> when(buttonID) {
                1 -> playerl("Yes, what clothes do you have in stock?").also { npc.openShop(player) }
                2 -> playerl("Yes, about those clothes again...").also { stage = 3 }
                3 -> playerl("No, I'm just browsing.").also { stage = END_DIALOGUE }
            }
            3 -> npcl(FacialExpression.OLD_DEFAULT, "Well, like I said, I can't do anything really without my spinning machine.").also { stage++ }
            4 -> playerl("Right, and what did you need again to start the engine?").also { stage++ }
            5 -> npcl(FacialExpression.OLD_DEFAULT, "Some coal and logs should do it!").also { stage++ }
            6 -> playerl("I've got them right here!").also { stage++ }
            7 -> npcl(FacialExpression.OLD_DEFAULT, "Then put them in the machine dear!").also { stage = END_DIALOGUE }
        }
    }
}
//Spinning machine transcript//
//If you clicked on the spinning machine without using coal and logs on it prints this inside chat box//
Why are you doing this? You have no reason to.

//Using coal/logs on spinning machine puts both items in it and prints this inside chat box//
You load the spinning machine with coal and logs.

//Successfully use tinderbox on the spinning machine and this prints inside of the chat box//
You bend down to light the logs...
...and successfully start the engine!

//If you fail to light it you get these lines printed inside of the chat box.//
...but fail miserably.
Perhaps you should improve your firemaking skill? Or just try again...

//Talking to Vermundi after using the  coal and logs on the spinning machine//

class VermundiDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl(FacialExpression.OLD_DEFAULT, "Welcome to my clothes stall, can I help you with anything?").also { stage++ }
            1 -> options("Yes, what clothes do you have in stock?", "Yes, about those clothes again...", "No, I'm just browsing.").also { stage++ }
            2 -> when(buttonID) {
                1 -> playerl("Yes, what clothes do you have in stock?").also { npc.openShop(player) }
                2 -> playerl("Yes, about those clothes again...").also { stage = 3 }
                3 -> playerl("No, I'm just browsing.").also { stage = END_DIALOGUE }
            }
            3 -> playerl("Can I have those clothes now?").also { stage++ }
            4 -> npcl(FacialExpression.OLD_DEFAULT, "Yes, I can spin them for you, but I will have to ask you for a small payment of money for them.").also { stage++ }
            5 -> playerl("What, after all that work?").also { stage++ }
            6 -> npcl(FacialExpression.OLD_DEFAULT, "I'm sorry, but the cloth to spin this is expensive. But for you, I can make the clothes for a nominal fee of 200 credits.").also { stage++ }
            7 -> options("I'll pay.", "I won't pay.").also { stage++ }
            8 -> when(buttonID) {
                1 -> playerl("I'll pay.").also { stage = 9 }
                2 -> playerl("I won't pay, that's outrageous!").also { stage = 11 }
                9 -> playerl("I'll pay, I'll pay.").also { stage++ }
                10 -> npcl(FacialExpression.OLD_DEFAULT, "Wonderful, let me get started then!").also { stage = END_DIALOGUE }
                11 -> npcl(FacialExpression.OLD_DEFAULT, "I'm sorry for feel that way, I was looking forward to making these clothes.").also { stage = END_DIALOGUE }
            }
        }
    }
}
//vermundi auto talks to you after clothes making cutscene.//

class VermundiDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl(FacialExpression.OLD_DEFAULT, "There we go! And look how beautiful these clothes look!").also { stage++ }
            1 -> playerl("Thank you very much!").also { stage = END_DIALOGUE }
        }
    }
}
//Talking to Vermundi to get a second pair of clothes without dropping/losing the first//

class VermundiDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl(FacialExpression.OLD_DEFAULT, "Welcome to my clothes stall, can I help you with anything?").also { stage++ }
            1 -> options("Yes, what clothes do you have in stock?", "Yes, about those clothes again...", "No, I'm just browsing.").also { stage++ }
            2 -> when(buttonID) {
                1 -> playerl("Yes, what clothes do you have in stock?").also { npc.openShop(player) }
                2 -> playerl("Yes, about those clothes again...").also { stage = 3 }
                3 -> playerl("No, I'm just browsing.").also { stage = END_DIALOGUE }
            }
            3 -> playerl("Can I have those clothes now?").also { stage++ }
            4 -> npcl(FacialExpression.OLD_DEFAULT, "Didn't I already make the clothes for you? I'm not rich, you know, I can't afford to make any more.").also { stage = END_DIALOGUE }
        }
    }
}
//Talking to Vermundi to get a second pair of clothes after dropping/losing them//

class VermundiDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl(FacialExpression.OLD_DEFAULT, "Welcome to my clothes stall, can I help you with anything?").also { stage++ }
            1 -> options("Yes, what clothes do you have in stock?", "Yes, about those clothes again...", "No, I'm just browsing.").also { stage++ }
            2 -> when(buttonID) {
                1 -> playerl("Yes, what clothes do you have in stock?").also { npc.openShop(player) }
                2 -> playerl("Yes, about those clothes again...").also { stage = 3 }
                3 -> playerl("No, I'm just browsing.").also { stage = END_DIALOGUE }
            }
            3 -> playerl("Can I have those clothes now?").also { stage++ }
            4 -> npcl(FacialExpression.OLD_DEFAULT, "Didn't I already make the clothes for you? I'm not rich, you know, I can make you another pair for for a nominal fee of 200 credits.").also { stage++ }
            7 -> options("I'll pay.", "I won't pay.").also { stage++ }
            8 -> when(buttonID) {
                1 -> playerl("I'll pay.").also { stage = 9 }
                2 -> playerl("I won't pay, that's outrageous!").also { stage = 11 }
                9 -> playerl("I'll pay, I'll pay.").also { stage++ }
                10 -> npcl(FacialExpression.OLD_DEFAULT, "Wonderful, let me get started then!").also { stage = END_DIALOGUE }
                11 -> npcl(FacialExpression.OLD_DEFAULT, "I'm sorry for feel that way, I was looking forward to making these clothes.").also { stage = END_DIALOGUE }
            }
        }
    }
}
//Attempting to wear the clothes//

class ClothesDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> playerl("These clothes are too small for me, I might ruin them if I put them on. I'd better take them to the sculptor instead.").also { stage = END_DIALOGUE }
                )
        }
    }
}
//Talking to Blasidar if the player had items in bank, and did not fully repair the axe//

class BlasidarDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl(FacialExpression.OLD_DEFAULT, "How are you getting along with those items, ${player.name}").also { stage++ }
            1 -> playerl("I have your boots in the bank.").also { stage++ }
            2 -> npcl(FacialExpression.OLD_DEFAULT, "Then go and fetch them for me, would you? What else?").also { stage++ }
            3 -> playerl("I had Vermundi make these clothes, but I left them in the bank.").also { stage++ }
            4 -> npcl(FacialExpression.OLD_DEFAULT, "Go and pick them up please? That would be ever so helpful. And? The battleaxe?").also { stage++ }
            5 -> playerl("Look, I've got it right here.").also { stage++ }
            6 -> npcl(FacialExpression.OLD_DEFAULT, "What, that old thing? Is that a piece of rubbish you found inn the garbage? Besides, from what I recall of the original axe, this doesn't even look anything like it.").also { stage = END_DIALOGUE }
        }
    }
}
//Talking to Blasidar if the player with all three items in inventory//

class BlasidarDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl(FacialExpression.OLD_DEFAULT, "How are you getting along with those items, ${player.name}").also { stage++ }
            1 -> playerl("II have your boots!").also { stage++ }
            2 -> npcl(FacialExpression.OLD_DEFAULT, "Excellent, excellent! Go and give them to Riki over there so I can start my work on the base of the statue! What else?").also { stage++ }
            3 -> playerl("I had Vermundi make these clothes!").also { stage++ }
            4 -> npcl(FacialExpression.OLD_DEFAULT, "Oh yes, Vermundi is a good woman, she's very reliable. Wonderful clothing. Give it to Riki please. And? The battleaxe?").also { stage++ }
            5 -> playerl("Oh, yes, I've got it right here!").also { stage++ }
            6 -> npcl(FacialExpression.OLD_DEFAULT, "Good job! Riki is your man, right over there. Give it to him please!").also { stage = END_DIALOGUE }
        }
    }
}
//Talking to Blasidar after giving Riki the sculptors model all three items requested (// "apparantly" is an authentic typo)//

class BlasidarDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> playerl("I've all the items you asked me to get you. Can you make the statue now?").also { stage++ }
            1 -> npcl(FacialExpression.OLD_DEFAULT, "Yes, yes, that will do just fine. There is only one problem now, I still need to make the head.").also { stage++ }
            2 -> playerl("So you need me to find a crown now as well?").also { stage++ }
            3 -> npcl(FacialExpression.OLD_DEFAULT, "Oh no, no no, apparantly the Consortium has decided that crowns are out of fashion. As well as kings. Well, kings have been out of fashion here for hundreds of years.").also { stage++ }
            4 -> playerl("So what is the head supposed to look like now?").also { stage++ }
            5 -> npcl(FacialExpression.OLD_DEFAULT, "I don't think they've quite made a decision on that. You see, I think each of the directors of the Consortium fancies their own face on top of the statue.").also { stage++ }
            6 -> playerl("What? But I thought the whole point was that it would look like king what's-his-face?").also { stage++ }
            7 -> npcl(FacialExpression.OLD_DEFAULT, "Yes, the Consortium can be a little fickle like that, unfortunately.").also { stage++ }
            8 -> npcl(FacialExpression.OLD_DEFAULT, "But can you go and see if they've made a decision yet? I can't very well continue working on this statue without knowing what the face should look like, can I?").also { stage++ }
            9 -> playerl("No, I suppose you can't. Alright, I'll check it out.").also { stage++ }
            10 -> npcl(FacialExpression.OLD_DEFAULT, "Great! In the mean time, I'll build the statue up to the neck!").also { stage = END_DIALOGUE }
        }
    }
}
//Plays a small cutscene of a headless giant dwarf statue//

//Talking to Blasidar before talking to anyone at the consortium//
class BlasidarDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl(FacialExpression.OLD_DEFAULT, "Any word from the Consortium yet?").also { stage++ }
            1 -> playerl("No, the directors have not made a decision yet.").also { stage++ }
            2 -> npcl(FacialExpression.OLD_DEFAULT, "Then please, try to persuade one of the directors to force the Consortium into a decision. I must finish this statue before I can move onto my other work.").also { stage = END_DIALOGUE }
        }
    }
}
//Talking to Riki again after the headless statue cutscene//

class RikiDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> playerl("I'm glad I don't have to talk to you anymore!").also { stage++ }
            1 -> npcl(FacialExpression.OLD_DEFAULT, "Hrm.").also { stage = END_DIALOGUE }
        }
    }
}
//Talking to Commander Veldaban after the headless statue was made but before working for the consortium//

class VeldabanDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl("I see the new statue is nearly completed, ${player.name}! Well done!").also { stage++ }
            1 -> playerl("Yes, it just needs a head now. But I'm not sure the Consortium is able to make a decision on what the head should look like.").also { stage++ }
            2 -> npcl(FacialExpression.OLD_DEFAULT, "Perhaps you can be of help here again. If you can get a director to trust you enough, they might let you come along to one of their meetings.").also { stage++ }
            3 -> playerl("Do you really think they would do that? Letting a human in on their meetings?").also { stage++ }
            4 -> npcl(FacialExpression.OLD_DEFAULT, "I can come along if you like. You, as an outsider, are in an excellent position to influence the Consortium.").also { stage++ }
            5 -> playerl("I'll see what I can do again.").also { stage = END_DIALOGUE }
        }
    }
}
//There are eight mining companies in the Consortium, each stationed in the upstairs of the marketplace. You need to impress (fetch/mine/smelt ore and bars) and then join one of them. The companies are:

The Blue Opal

The Brown Engine (female players are not allowed to join this company)

The Green Gemstone

The Purple Pewter

The Red Axe (you cannot join this company, they are the antagonist of this quest)

The Silver Cog

The White Chisel

The Yellow Fortune (male players are not allowed to join this company)

Talk to the Secretary of the company that you want to work for. You will be given a task to collect a certain kind of ore within a time limit. All of the ores can be found nearby. You can also get the ores from the bank, which the Consortium has ladders leading down to as a shortcut. Note: You do not have to mine the ores. All the ores, except for clay, may be purchased at the blast furnace. All ores are requested in groups (E.g. 2 to 5 iron ores can be requested). //

//Attempting to help Brown Engine as a female//

class BrownEngineGenderDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl("The Brown Engine is a gentleman only society, I'm afraid.").also { stage++ }
            1 -> playerl("How rude.").also { stage = END_DIALOGUE }
        }
    }
}
//Attempting to help Yellow Fortune as a male//

class YellowFortuneGenderDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl("The Yellow Fortune is a women's only society, I'm afraid.").also { stage++ }
            1 -> playerl("How rude.").also { stage = END_DIALOGUE }
        }
    }
}
//I will write an example dialogue for the Companies' Secretarys. You can get several greetings from the secretary. "What can I do for you, human?", "Was there anything you wanted?", "What did you need of the {company.name}?", "Is there anything you need assistance with?". I can not find some dialogue sorry about the ??????//

class CompanySecretaryDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl(FacialExpression.OLD_DEFAULT, "What can I do for you, human?").also { stage++ }
            1 -> options("Who are you?", "Where am I?", "Is there anything I can help you with?", "I need to speak to the director.", "I have to go!").also { stage++ }
            2 -> when(buttonID) {
                1 -> playerl("Who are you?").also { ?????? }
                2 -> playerl("Where am I?").also { ?????? }
                3 -> playerl("Is there anything I can help you with?").also { stage = 8 }
                4 -> playerl("I need to speak to the director.").also { stage = 3 }
                5 -> playerl("I have to go!").also { stage = END_DIALOGUE }
            }
            3 -> playerl("I need to speak to the director.").also { stage++ }
            4 -> npcl(FacialExpression.OLD_DEFAULT, "I don't see any reasdon to grant such a privledge to a lowly worker. No, first you must prove yourself.").also { stage++ }
            5 -> options("But I've come from Blasidar the sculptor.", "How can I prove myself?").also { stage++ }
            6 -> when(buttonID) {
                1 -> playerl("But I've come from Blasidar the sculptor.").also { stage = 14 }
                2 -> playerl("How can I prove myself?").also { stage = 7 }
                7 -> npcl(FacialExpression.OLD_DEFAULT, "It's all very simple. You perform some tasks for us, help us out a little when we need something done urgently, and in reward you will rise in our estimation.").also { stage = 1 }
                8 -> npcl(FacialExpression.OLD_DEFAULT, "Just a moment.").also { stage++ }
                9 -> npcl(FacialExpression.OLD_DEFAULT, "Yes, we do have something that needs doing at the moment.").also { stage++ }
                10 -> npcl(FacialExpression.OLD_DEFAULT, "We need 4 pieces of mithril ore in the next 14 minutes.").also { stage++ }
                11 -> options("I'll take it.", "No thanks.").also { stage++ }
                12 -> when(buttonID) {
                    1 -> playerl("I'll take it.").also { stage = 13 }
                    2 -> playerl("No thanks.").also { stage = END_DIALOGUE }
                    13 -> npcl(FacialExpression.OLD_DEFAULT, "That ore needs to go on the trade floor soon, ${player.name}, please hurry back with it").also { stage = END_DIALOGUE }
                    14 -> npcl(FacialExpression.OLD_DEFAULT, "Blasidar does not command the ${company.name}.").also { stage++ }
                    15 -> playerl("But... Commander Veldaban of the Black Guard has instructed me to do this!").also { stage++ }
                    16 -> npcl(FacialExpression.OLD_DEFAULT, "Nor does the Black Guard. They are under the command of the Consortium, not the other way around.").also { stage = 1 }
                }
            }
        }
    }
}
//Talking to secretaries to compelte a task with ore in your inventory. then it just goes back to the options where you can ask for another job. But all of this dialogue can vary! You'll need 3-5 ore errands based on video research.//

class CompanySecretaryDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> playerl("I've completed your task! Here is your ore!").also { stage++ }
            1 -> npcl(FacialExpression.OLD_DEFAULT, "I am happy to see that the trust we put in you has not been in vain.").also { stage++ }
            1 -> options("Who are you?", "Where am I?", "Is there anything I can help you with?", "I need to speak to the director.", "I have to go!").also { stage++ }
            2 -> when(buttonID) {
                1 -> playerl("Who are you?").also { ?????? }
                2 -> playerl("Where am I?").also { ?????? }
                3 -> playerl("Is there anything I can help you with?").also { stage = 8 }
                4 -> playerl("I need to speak to the director.").also { stage = 3 }
                5 -> playerl("I have to go!").also { stage = END_DIALOGUE }
            }
            3 -> playerl("I need to speak to the director.").also { stage++ }
            4 -> npcl(FacialExpression.OLD_DEFAULT, "I don't see any reasdon to grant such a privledge to a lowly worker. No, first you must prove yourself.").also { stage++ }
            5 -> options("But I've come from Blasidar the sculptor.", "How can I prove myself?").also { stage++ }
            6 -> when(buttonID) {
                1 -> playerl("But I've come from Blasidar the sculptor.").also { stage = 14 }
                2 -> playerl("How can I prove myself?").also { stage = 7 }
                7 -> npcl(FacialExpression.OLD_DEFAULT, "It's all very simple. You perform some tasks for us, help us out a little when we need something done urgently, and in reward you will rise in our estimation.").also { stage = 1 }
                8 -> npcl(FacialExpression.OLD_DEFAULT, "There's always work to be done, yes.").also { stage++ }
                10 -> npcl(FacialExpression.OLD_DEFAULT, "We need 5 pieces of mithril ore in the next 15 minutes.").also { stage++ }
                11 -> options("I'll take it.", "No thanks.").also { stage++ }
                12 -> when(buttonID) {
                    1 -> playerl("I'll take it.").also { stage = 13 }
                    2 -> playerl("No thanks.").also { stage = END_DIALOGUE }
                    13 -> npcl(FacialExpression.OLD_DEFAULT, "The clock is ticking, please hurry back.").also { stage = END_DIALOGUE }
                    14 -> npcl(FacialExpression.OLD_DEFAULT, "Blasidar does not command the ${company.name}.").also { stage++ }
                    15 -> playerl("But... Commander Veldaban of the Black Guard has instructed me to do this!").also { stage++ }
                    16 -> npcl(FacialExpression.OLD_DEFAULT, "Nor does the Black Guard. They are under the command of the Consortium, not the other way around.").also { stage = 1 }
                }
            }
        }
    }
}
//When you've done enough work for the secretary//

class CompanySecretaryDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> playerl("I've completed your task! Here is your ore!").also { stage++ }
            1 -> npcl(FacialExpression.OLD_DEFAULT, "Thanks, I will make sure the director hears of your expeditiousness!").also { stage++ }
            1 -> options("Who are you?", "Where am I?", "Is there anything I can help you with?", "I need to speak to the director.", "I have to go!").also { stage++ }
            2 -> when(buttonID) {
                1 -> playerl("Who are you?").also { ?????? }
                2 -> playerl("Where am I?").also { ?????? }
                3 -> playerl("Is there anything I can help you with?").also { stage = 8 }
                4 -> playerl("I need to speak to the director.").also { stage = 3 }
                5 -> playerl("I have to go!").also { stage = END_DIALOGUE }
            }
            3 -> playerl("I need to speak to the director.").also { stage++ }
            4 -> npcl(FacialExpression.OLD_DEFAULT, "I don't see any reasdon to grant such a privledge to a lowly worker. No, first you must prove yourself.").also { stage++ }
            5 -> options("But I've come from Blasidar the sculptor.", "How can I prove myself?").also { stage++ }
            6 -> when(buttonID) {
                1 -> playerl("But I've come from Blasidar the sculptor.").also { stage = 14 }
                2 -> playerl("How can I prove myself?").also { stage = 7 }
                7 -> npcl(FacialExpression.OLD_DEFAULT, "It's all very simple. You perform some tasks for us, help us out a little when we need something done urgently, and in reward you will rise in our estimation.").also { stage = 1 }
                8 -> npcl(FacialExpression.OLD_DEFAULT, "I'm afraid I have no more work to offer you, ${player.name}, please speak to the director.").also { stage = 1 }
                10 -> npcl(FacialExpression.OLD_DEFAULT, "We need 5 pieces of mithril ore in the next 15 minutes.").also { stage++ }
                11 -> options("I'll take it.", "No thanks.").also { stage++ }
                12 -> when(buttonID) {
                    1 -> playerl("I'll take it.").also { stage = 13 }
                    2 -> playerl("No thanks.").also { stage = END_DIALOGUE }
                    13 -> npcl(FacialExpression.OLD_DEFAULT, "The clock is ticking, please hurry back.").also { stage = END_DIALOGUE }
                    14 -> npcl(FacialExpression.OLD_DEFAULT, "Blasidar does not command the ${company.name}.").also { stage++ }
                    15 -> playerl("But... Commander Veldaban of the Black Guard has instructed me to do this!").also { stage++ }
                    16 -> npcl(FacialExpression.OLD_DEFAULT, "Nor does the Black Guard. They are under the command of the Consortium, not the other way around.").also { stage = 1 }
                }
            }
        }
    }
}
//Speaking to the director after doing enough tasks for the secretary. You will get 1-3 bar delivery tasks.//

class CompanyDirectorDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl(FacialExpression.OLD_DEFAULT, "Come, ${player.name}, let us converse a while on your future with us.").also { stage++ }
            1 -> options("It's an honour to meet you!", "It'd like to officially join your company.", "Do you have any more tasks for me?", "Blasidar the sculptor has sent me.", "Thank you for your time.").also { stage++ }
            2 -> when(buttonID) {
                1 -> playerl("It's an honour to meet you!").also { stage = 8 }
                2 -> playerl("It'd like to officially join your company.").also { stage = 24 }
                3 -> playerl("Do you have any more tasks for me?").also { stage = 3 }
                4 -> playerl("Blasidar the sculptor has sent me.").also { stage = 9 }
                5 -> playerl("Thank you for your time.").also { stage = END_DIALOGUE }
            }
            3 -> npcl(FacialExpression.OLD_DEFAULT, "I do believe so, yes.").also { stage = END_DIALOGUE }
            4 -> npcl(FacialExpression.OLD_DEFAULT, "We need 3 bars of bronze in the next 16 minutes.").also { stage++ }
            5 -> options("I'll take it.", "No thanks.").also { stage++ }
            6 -> when(buttonID) {
                1 -> playerl("I'll take it.").also { stage = 7 }
                2 -> playerl("No thanks.").also { stage = END_DIALOGUE }
                7 -> npcl("Admirable attitude, ${player.name}!").also { stage = END_DIALOGUE }
                8 -> npcl(FacialExpression.OLD_DEFAULT, "Fine, fine, now what did you want to talk about?").also { stage = 1 }
                9 -> npcl(FacialExpression.OLD_DEFAULT, "Oh yes? This is in connection with the statue, presumably?").also { stage++ }
                10 -> playerl("He says he needs to know what the head of the statue should look like now that it's no longer going to look like King Alvis.").also { stage++ }
                11 -> npcl(FacialExpression.OLD_DEFAULT, "Oh yes, Hreidmar suggested that it should be one of us. The Era of Kings is long gone, after all. Now the Consortium provides peace and above all prosperity... so the statue should reflect this.").also { stage++ }
                12 -> playerl("Hreidmar? Who is Hreidmar?").also { stage++ }
                13 -> npcl(FacialExpression.OLD_DEFAULT, "He is the director of the Red Axe. Ha, that old fool quite fancies his own head up on that statue, he thinks he can get away with that just because his company is one of the largest in the Consortium.").also { stage++ }
                14 -> playerl("So I shouldn't tell the sculptor that he should base it on him then?").also { stage++ }
                15 -> npcl(FacialExpression.OLD_DEFAULT, "Certainly not!").also { stage++ }
                16 -> npcl(FacialExpression.OLD_DEFAULT, "The Consortium has yet to make a decision... all the companies are vying for the honour.").also { stage++ }
                17 -> options("I would support you.", "I hope you lot figure it out soon.").also { stage++ }
                18 -> when(buttonID) {
                    1 -> playerl("I would support you.").also { stage = 19 }
                    2 -> playerl("I hope you lot figure it out soon.").also { stage = END_DIALOGUE }
                    19 -> npcl(FacialExpression.OLD_DEFAULT, "Ah, would you now, would you?").also { stage++ }
                    20 -> npcl(FacialExpression.OLD_DEFAULT, "I'm not altogether sure... much appreciated though you are, you are not really part of the ${company.name}. Not as such.").also { stage++ }
                    21 -> playerl("What if I were?").also { stage++ }
                    22 -> npcl(FacialExpression.OLD_DEFAULT, "Were what? A part of the ${company.name}?").also { stage++ }
                    23 -> npcl(FacialExpression.OLD_DEFAULT, "Yes, that might certainly change things...").also { stage = 1 }
                    24 -> npcl(FacialExpression.OLD_DEFAULT, "Hmm, Interesting, a human joining the ${company.name}.").also { stage++ }
                    25 -> npcl(FacialExpression.OLD_DEFAULT, "But no. You may have proven yourself to my head secretary, and much appreciated that is as well, you have not fully proven yourself to me yet.").also { stage++ }
                    26 -> npcl(FacialExpression.OLD_DEFAULT, "So no, I cannot grant you this request yet, but I will certainly keep it in mind. In the mean time make sure you help out the ${company.name} in any way you can.").also { stage = 1 }
                }
            }
        }
    }
}
//Speaking to the director to complete a task.//

class CompanyDirectorDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> playerl("I've completed your task! Here are your bars!").also { stage++ }
            1 -> npcl("The ${company.name} can always rely on you, ${player.name}!").also { stage++ }
            2 -> options("It's an honour to meet you!", "It'd like to officially join your company.", "Do you have any more tasks for me?", "Blasidar the sculptor has sent me.", "Thank you for your time.").also { stage++ }
            3 -> when(buttonID) {
                1 -> playerl("It's an honour to meet you!").also { stage = 9 }
                2 -> playerl("It'd like to officially join your company.").also { stage = 25 }
                3 -> playerl("Do you have any more tasks for me?").also { stage = 4 }
                4 -> playerl("Blasidar the sculptor has sent me.").also { stage = 10 }
                5 -> playerl("Thank you for your time.").also { stage = END_DIALOGUE }
            }
            4 -> npcl(FacialExpression.OLD_DEFAULT, "I do believe so, yes.").also { stage = END_DIALOGUE }
            5 -> npcl(FacialExpression.OLD_DEFAULT, "We need 3 bars of bronze in the next 16 minutes.").also { stage++ }
            6 -> options("I'll take it.", "No thanks.").also { stage++ }
            7 -> when(buttonID) {
                1 -> playerl("I'll take it.").also { stage = 8 }
                2 -> playerl("No thanks.").also { stage = END_DIALOGUE }
                8 -> npcl("Admirable attitude, ${player.name}!").also { stage = END_DIALOGUE }
                9 -> npcl(FacialExpression.OLD_DEFAULT, "Fine, fine, now what did you want to talk about?").also { stage = 2 }
                10 -> npcl(FacialExpression.OLD_DEFAULT, "Oh yes? This is in connection with the statue, presumably?").also { stage++ }
                11 -> playerl("He says he needs to know what the head of the statue should look like now that it's no longer going to look like King Alvis.").also { stage++ }
                12 -> npcl(FacialExpression.OLD_DEFAULT, "Oh yes, Hreidmar suggested that it should be one of us. The Era of Kings is long gone, after all. Now the Consortium provides peace and above all prosperity... so the statue should reflect this.").also { stage++ }
                13 -> playerl("Hreidmar? Who is Hreidmar?").also { stage++ }
                14 -> npcl(FacialExpression.OLD_DEFAULT, "He is the director of the Red Axe. Ha, that old fool quite fancies his own head up on that statue, he thinks he can get away with that just because his company is one of the largest in the Consortium.").also { stage++ }
                15 -> playerl("So I shouldn't tell the sculptor that he should base it on him then?").also { stage++ }
                16 -> npcl(FacialExpression.OLD_DEFAULT, "Certainly not!").also { stage++ }
                17 -> npcl(FacialExpression.OLD_DEFAULT, "The Consortium has yet to make a decision... all the companies are vying for the honour.").also { stage++ }
                18 -> options("I would support you.", "I hope you lot figure it out soon.").also { stage++ }
                19 -> when(buttonID) {
                    1 -> playerl("I would support you.").also { stage = 20 }
                    2 -> playerl("I hope you lot figure it out soon.").also { stage = END_DIALOGUE }
                    20 -> npcl(FacialExpression.OLD_DEFAULT, "Ah, would you now, would you?").also { stage++ }
                    21 -> npcl(FacialExpression.OLD_DEFAULT, "I'm not altogether sure... much appreciated though you are, you are not really part of the ${company.name}. Not as such.").also { stage++ }
                    22 -> playerl("What if I were?").also { stage++ }
                    23 -> npcl(FacialExpression.OLD_DEFAULT, "Were what? A part of the ${company.name}?").also { stage++ }
                    24 -> npcl(FacialExpression.OLD_DEFAULT, "Yes, that might certainly change things...").also { stage = 2 }
                    25 -> npcl(FacialExpression.OLD_DEFAULT, "Hmm, Interesting, a human joining the ${company.name}.").also { stage++ }
                    26 -> npcl(FacialExpression.OLD_DEFAULT, "But no. You may have proven yourself to my head secretary, and much appreciated that is as well, you have not fully proven yourself to me yet.").also { stage++ }
                    27 -> npcl(FacialExpression.OLD_DEFAULT, "So no, I cannot grant you this request yet, but I will certainly keep it in mind. In the mean time make sure you help out the ${company.name} in any way you can.").also { stage = 2 }
                }
            }
        }
    }
}
//Speaking to the director after completing enough tasks. I'll break this into two since one of the options disappears after you join and he sends you back to a new options menu.//

class CompanyDirectorDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> playerl("I've completed your task! Here are your bars!").also { stage++ }
            1 -> npcl("The ${company.name} can always rely on you, ${player.name}!").also { stage++ }
            2 -> options("It's an honour to meet you!", "It'd like to officially join your company.", "Do you have any more tasks for me?", "Blasidar the sculptor has sent me.", "Thank you for your time.").also { stage++ }
            3 -> when(buttonID) {
                1 -> playerl("It's an honour to meet you!").also { stage = 9 }
                2 -> playerl("It'd like to officially join your company.").also { stage = 25 }
                3 -> playerl("Do you have any more tasks for me?").also { stage = 4 }
                4 -> playerl("Blasidar the sculptor has sent me.").also { stage = 10 }
                5 -> playerl("Thank you for your time.").also { stage = END_DIALOGUE }
            }
            4 -> npcl(FacialExpression.OLD_DEFAULT, "I do believe so, yes.").also { stage = END_DIALOGUE }
            5 -> npcl(FacialExpression.OLD_DEFAULT, "We need 3 bars of bronze in the next 16 minutes.").also { stage++ }
            6 -> options("I'll take it.", "No thanks.").also { stage++ }
            7 -> when(buttonID) {
                1 -> playerl("I'll take it.").also { stage = 8 }
                2 -> playerl("No thanks.").also { stage = END_DIALOGUE }
                8 -> npcl("Admirable attitude, ${player.name}!").also { stage = END_DIALOGUE }
                9 -> npcl(FacialExpression.OLD_DEFAULT, "Fine, fine, now what did you want to talk about?").also { stage = 2 }
                10 -> npcl(FacialExpression.OLD_DEFAULT, "Oh yes? This is in connection with the statue, presumably?").also { stage++ }
                11 -> playerl("He says he needs to know what the head of the statue should look like now that it's no longer going to look like King Alvis.").also { stage++ }
                12 -> npcl(FacialExpression.OLD_DEFAULT, "Oh yes, Hreidmar suggested that it should be one of us. The Era of Kings is long gone, after all. Now the Consortium provides peace and above all prosperity... so the statue should reflect this.").also { stage++ }
                13 -> playerl("Hreidmar? Who is Hreidmar?").also { stage++ }
                14 -> npcl(FacialExpression.OLD_DEFAULT, "He is the director of the Red Axe. Ha, that old fool quite fancies his own head up on that statue, he thinks he can get away with that just because his company is one of the largest in the Consortium.").also { stage++ }
                15 -> playerl("So I shouldn't tell the sculptor that he should base it on him then?").also { stage++ }
                16 -> npcl(FacialExpression.OLD_DEFAULT, "Certainly not!").also { stage++ }
                17 -> npcl(FacialExpression.OLD_DEFAULT, "The Consortium has yet to make a decision... all the companies are vying for the honour.").also { stage++ }
                18 -> options("I would support you.", "I hope you lot figure it out soon.").also { stage++ }
                19 -> when(buttonID) {
                    1 -> playerl("I would support you.").also { stage = 20 }
                    2 -> playerl("I hope you lot figure it out soon.").also { stage = END_DIALOGUE }
                    20 -> npcl(FacialExpression.OLD_DEFAULT, "Ah, would you now, would you?").also { stage++ }
                    21 -> npcl(FacialExpression.OLD_DEFAULT, "I'm not altogether sure... much appreciated though you are, you are not really part of the ${company.name}. Not as such.").also { stage++ }
                    22 -> playerl("What if I were?").also { stage++ }
                    23 -> npcl(FacialExpression.OLD_DEFAULT, "Were what? A part of the ${company.name}?").also { stage++ }
                    24 -> npcl(FacialExpression.OLD_DEFAULT, "Yes, that might certainly change things...").also { stage = 2 }
                    25 -> npcl(FacialExpression.OLD_DEFAULT, "Hmm, Interesting, a human joining the ${company.name}.").also { stage++ }
                    26 -> npcl(FacialExpression.OLD_DEFAULT, "But you have certainly proven yourself to be a most worthwhile contributor. I have not seen such dedication in all my years as a director of this company.").also { stage++ }
                    27 -> npcl(FacialExpression.OLD_DEFAULT, "It is agreed then! You are now a 'trusted associate' of the ${company.name}. Welcome!").also { stage++ }
                    28 -> playerl("I will not disappoint you!").also { stage = END_DIALOGUE }
                }
            }
        }
    }
}
/*
 * Speaking to the director after joining the company.
 * The last box of text covers tha chat box. line 25,
 * player does not speak it....
 */

class CompanyDirectorDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl("Welcome back, ${player.name}, it's great to see you again!").also { stage++ }
            1 -> options("It's an honour to meet you!", "It'd like to officially join your company.", "Do you have any more tasks for me?", "Blasidar the sculptor has sent me.", "Thank you for your time.").also { stage++ }
            2 -> when(buttonID) {
                1 -> playerl("It's an honour to meet you!").also { stage = 4 }
                2 -> playerl("Do you have any more tasks for me?").also { stage = 3 }
                3 -> playerl("Blasidar the sculptor has sent me.").also { stage = 5 }
                4 -> playerl("Thank you for your time.").also { stage = END_DIALOGUE }
            }
            3 -> npcl(FacialExpression.OLD_DEFAULT, "I have no more tasks for you.").also { stage = 2 }
            4 -> npcl(FacialExpression.OLD_DEFAULT, "Fine, fine, now what did you want to talk about?").also { stage = 2 }
            5 -> npcl(FacialExpression.OLD_DEFAULT, "Oh yes? This is in connection with the statue, presumably?").also { stage++ }
            6 -> playerl("He says he needs to know what the head of the statue should look like now that it's no longer going to look like King Alvis.").also { stage++ }
            7 -> npcl(FacialExpression.OLD_DEFAULT, "Oh yes, Hreidmar suggested that it should be one of us. The Era of Kings is long gone, after all. Now the Consortium provides peace and above all prosperity... so the statue should reflect this.").also { stage++ }
            8 -> playerl("Hreidmar? Who is Hreidmar?").also { stage++ }
            9 -> npcl(FacialExpression.OLD_DEFAULT, "He is the director of the Red Axe. Ha, that old fool quite fancies his own head up on that statue, he thinks he can get away with that just because his company is one of the largest in the Consortium.").also { stage++ }
            10 -> playerl("So I shouldn't tell the sculptor that he should base it on him then?").also { stage++ }
            11 -> npcl(FacialExpression.OLD_DEFAULT, "Certainly not!").also { stage++ }
            12 -> npcl(FacialExpression.OLD_DEFAULT, "The Consortium has yet to make a decision... all the companies are vying for the honour.").also { stage++ }
            13 -> options("I would support you.", "I hope you lot figure it out soon.").also { stage++ }
            14 -> when(buttonID) {
                1 -> playerl("I would support you.").also { stage = 15 }
                2 -> playerl("I hope you lot figure it out soon.").also { stage = END_DIALOGUE }
                15 -> npcl(FacialExpression.OLD_DEFAULT, "Ah, would you now, would you?").also { stage++ }
                16 -> npcl(FacialExpression.OLD_DEFAULT, "This might well work. Yes, an outsider to the city might have considerably more influence than one might expect, if we play our cards right.").also { stage++ }
                17 -> playerl("How do you mean, play our cards right?").also { stage++ }
                18 -> npcl(FacialExpression.OLD_DEFAULT, "We wait until the most opportune moment for you to show your support. Yes, you must really come along to one of our meetings.").also { stage++ }
                19 -> playerl("Now you're really losing me... what meetings?").also { stage++ }
                20 -> npcl(FacialExpression.OLD_DEFAULT, "A Consortium meeting, when all the directors meet on the top floor of the palace. We have them from time to time. We'll have another one soon, to once and for all solve our little problem with the statue.").also { stage++ }
                21 -> npcl(FacialExpression.OLD_DEFAULT, "So what do you say, will you speak out for me at the next meeting, so that they will base the head of the statue on me?").also { stage++ }
                22 -> options("Yes! Long live the ${company.name}!", "I need to have a think about that.").also { stage++ }
                23 -> when(buttonID) {
                    1 -> playerl("Yes! Long live the ${company.name}!").also { stage = 24 }
                    2 -> playerl("I need to have a think about that.").also { stage = END_DIALOGUE }
                    24 -> npcl(FacialExpression.OLD_DEFAULT, "Hurrah!").also { stage++ }
                    25 -> playerl("Now would be a good time to visit Veldaban of the Black Guard, in the west of Keldagrim.").also { stage = END_DIALOGUE }
                }}
        }
    }
}
/*
Speaking to Commander Veldaban after successfully joining a group.
line 13 fade to black and come back with meeting notes and quest completion.
line 14 fades to black and goes to meeting cutscene.
*/

class VeldabanDialogue : DialogueFile() {
    override fun handle(componentID: Int, buttonID: Int) {
        when(stage) {
            0 -> npcl("What news from the Consortium,, ${player.name}?").also { stage++ }
            1 -> playerl("I have told the director of the ${company.name} that I will sipport their bid to be put upon the statue.").also { stage++ }
            2 -> npcl(FacialExpression.OLD_DEFAULT, "Then perhaps they can finally end their impasse! Well, let's go to the meeting then!").also { stage++ }
            3 -> playerl("What, now?").also { stage++ }
            4 -> npcl(FacialExpression.OLD_DEFAULT, "Yes, now! Are you ready?").also { stage++ }
            5 -> options("I'm ready.", "No, I need more time.").also { stage++ }
            6 -> when(buttonID) {
                1 -> playerl("I'm ready.").also { stage = 7 }
                2 -> playerl("No, I need more time.").also { stage = END_DIALOGUE }
                7 -> npcl(FacialExpression.OLD_DEFAULT, "I do have to warn you, this meeting may take a while. Do you want to attend the meeting personally, or do you simply want the minutes so yo ucan read what happened afterwards?").also { stage++ }
                8 -> options("I want to attend, no matter how long it takes!", "I do NOT want to attend, I don't have time to waste.").also { stage++ }
                9 -> when(buttonID) {
                    1 -> playerl("I want to attend, no matter how long it takes!").also { stage = 14 }
                    2 -> playerl("I do NOT want to attend, I don't have time to waste.").also { stage = 10 }
                    10 -> npcl(FacialExpression.OLD_DEFAULT, "${player.name}, are you absolutely sure? You might not get another chance like this. Are you sure you just want to read the summary of the meeting instead of seeing the actual meeting?").also { stage++ }
                    11 -> options("On second thought, I can spare a few minutes to attend.", "I just have a lot of smithing to do today, I can't attend.").also { stage++ }
                    12 -> when(buttonID) {
                        1 -> playerl("On second thought, I can spare a few minutes to attend.").also { stage = 14 }
                        2 -> playerl("I just have a lot of smithing to do today, I can't attend.").also { stage = 13 }
                        13 -> npcl(FacialExpression.OLD_DEFAULT, "Very well. I'll give you the meeting minutes after it's finsihed.").also { stage = END_DIALOGUE }
                        14 -> npcl(FacialExpression.OLD_DEFAULT, "Happy to hear that! Let's hurry then, I think the meeting is already starting!").also { stage = END_DIALOGUE }
                    }
                }
            }
        }
    }
}
//This is the Consortium meeting cutscene. I have absolutely no idea what to write here. Here is the cut scene to reference https://www.youtube.com/watch?v=DAC_7hstvRk//

//Consortium meeting notes transcript https://runescape.wiki/w/Meeting_notes?direction=next&oldid=952935 //